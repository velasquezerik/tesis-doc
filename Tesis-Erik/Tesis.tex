\documentclass[14pt,oneside]{book}
\usepackage{ulamonog} % formato para la propuesta o proyecto de grado
\usepackage[ansinew]{inputenc} % escribir acentos

%\usepackage[activeacute,spanish]{babel}
\usepackage{graphicx}
\usepackage{color}
\usepackage{float}
\usepackage{verbatim}
\usepackage[colorlinks,pdftex]{hyperref}

\usepackage{setspace}
\usepackage{listings}             % Include the listings-package  

\usepackage{setspace}
\usepackage{listings} %para código
\usepackage{amsmath} %para alinear ecuaciones
\usepackage{longtable} % para tablas largas
\usepackage{cite} % para contraer referencias
%\usepackage[dvips]{graphicx} % PDFLaTeX
%\DeclareGraphicsExtensions{.png,.pdf,.jpg}

\usepackage{pdfpages}

\setlength{\parindent}{12pt}

% si se va a imprimir,
% se incluye al final despues de citecolor=blue, el comando draft=true
% Las siguientes son propiedades del pdf, más no cambian nada dentro del
% texto de la monografía
\hypersetup{pdftitle={Diseño e implementación de un Sistema Web para el Simulador de Eventos Discretos GALATEA.},
pdfauthor={Br. Erik Velásquez},
pdfsubject={Proyecto de Grado}, % se deja igual (se cambia para el proyecto de grado)
pdfkeywords={Servicios Web, Sistemas Distribuidos, Web Semántica, Arquitectura Orientada a Servicios, Simulación.},
pdfstartview=FitH, bookmarks=true, citecolor=blue, draft=true}
\nolistoffigures

\usepackage{natbib}

\let\olditemize\itemize
\def\itemize{\olditemize\itemsep=0pt }

\sloppy

\begin{document}

\lstset{frame=tb,
	language=Python,
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=false,
	columns=flexible,
	basicstyle={\small\ttfamily},
	numbers=left,
	breaklines=true,
	breakatwhitespace=true,
	tabsize=3
}
\frontmatter


% ***************************************************************** %
% Portada y resumen
% ***************************************************************** %

% Si desea que el logo de la ULA aparezca en la parte superior,
% descomente la siguiente línea. Por defecto aparece en la parte inferior
\logoarriba{}

% Año en el cual se entrega el proyecto de grado o la propuesta
\copyrightyear{2016}
%\tipomonografia{Proyecto de Grado}


% Título de la monografía, el cual saldrá en la portada
\title{Diseño e implementación de un Sistema Web para el Simulador de Eventos Discretos GALATEA.}


% Autor de la monografía, el cual saldrá en la portada
 \author{Erik Velásquez}

% La fechaentrega, presentaciondia, presentacionlugar
% y mencionespecial, es para aquel caso en el cual se
% vaya a utilizar la hoja del veredicto en el formato
% que se presenta aquí. El primerjurado, segundojurado,
% y cedula, son campos que pueden llenarse, pero sólo
% aparecerán si se utiliza la página del veredicto

% Cédula del autor de la monografía
 \cedula{19.435.165}

% Tutor del Proyecto de Grado
 \tutor{Dr. Jacinto Dávila}

% Cualquiera de los instructores que aparecen a continuación
% pueden comentarse o descomentarse según sea el caso:

%%% Cotutor del Proyecto de Grado
\cotutor{Prof. Kay Tucci}
%%% Asesor del Proyecto de Grado
% \asesor{Dr. Asesor}
%%% Asesor Industrial del Proyecto de Grado
% \asesorindustrial{Dr. Asesor Industrial}
%%% Tutor Industrial del Proyecto de Grado
% \tutorindustrial{Dr. Tutor Industrial}
%%% Jurados del Proyecto de Grado
% \primerjurado{Dr. Primer Profesor}
 %\segundojurado{Prof. Segundo Profesor}

% NO TOCAR si es Ingenieria de Sistemas
% \grado{Ingeniero Químico} % por defecto Ingeniero de Sistemas

%\signaturepage ----- NO TOCAR

%%%%%OJO%%%%%Arreglen esto según su opción
% Si es control y automatizacion se comentan las siguientes líneas. Si es de
% Sistemas Computacionales comenta la tercera. De Investigación de Operaciones
% comenta la segunda
 \opcion{Sistemas Computacionales}
%\opcion{Investigación de Operaciones}


% Aquí se escribe el resumen de la monografía
\resumen{
Se buscó implementar y desplegar como servicio, una aplicación utilizada para modelar y simular eventos discretos en sistemas distribuidos, utilizando como medio los servicios web. El objetivo principal de este proyecto consistió en buscar, mediante el uso de un sistema web, una solución al problema existente entre los usuarios y usuarias del Centro de Simulación y Modelado (CESIMO) de la Universidad de los Andes, que suelen tener muchas dificultades para ejecutar los modelos de simulación en el simulador GALATEA, especialmente al momento de configurar y activar todas sus funcionalidades. Mediante el patrón de diseño de software modelo vista controlador (MVC) y usando el framework de desarrollo web Django; se desarrolló el sistema web, que usando como motor principal a GALATEA, permite crear, controlar y simular proyectos de simulación. Al igual se creó un sistema de gestión y administración de archivos, la cual permite compartir y editar archivos entre los distintos usuarios y usuarias que hacen uso del sistema web de simulación.
}

% Aquí se escriben las palabras claves de la monografía
\descriptores{Servicios Web, Sistemas Distribuidos, Web Semántica, Arquitectura Orientada a Servicios, Simulación.}

% Esto es para que salga la cota en la hoja del resumen. Actualmente,
% 11-03-08, en la Escuela de Ingeniería de Sistemas no es necesario
% buscar la cota previamente, sino que el Proyecto de Grado se entrega
% en la Escuela sin cota.
%\cota{IXD A01.1}

% Si desea eliminar la frase "Este trabajo fue procesado en LATEX"
% del resumen, descomente la siguiente línea
 \sinlatex{}

% ***************************************************************** %
% FIN DE
% Portada y resumen
% ***************************************************************** %


% ***************************************************************** %
% Si tiene dedicatoria
% con o sin comentar
% ***************************************************************** %
\dedicatoria{Nadie.\\
Nadie.\\
Nadie.
}

% ***************************************************************** %
% FIN DE
% Si tiene dedicatoria
% ***************************************************************** %

\beforepreface

% ***************************************************************** %
% Agradecimientos y capítulos NO numerados
% ***************************************************************** %

\prefacesection{Agradecimientos}

Nadie.\\ \\
Nadie.\\ \\
Nadie.\\ \\
Nadie.\\ \\
Nadie.\\ \\
Nadie.\\ \\
Nadie.\\ \\
Nadie.

%%% Capitulo sin numero, antes de la pagina 1

%\prefacesection{Introducción}
% Este es un ejemplo de una sección no numerada.


% ***************************************************************** %
% FIN DE
% Agradecimientos y capítulos NO numerados
% ***************************************************************** %

\afterpreface

\pagestyle{fancyplain}
\renewcommand{\chaptermark}[1]{\markboth{#1}{\textsc{\footnotesize\thechapter\ #1}}}
\renewcommand{\sectionmark}[1]{\markright{\textsc{\footnotesize\thesection\ #1}}}
\lhead[\fancyplain{}{\textsc{\footnotesize\thepage}}]%
{\fancyplain{}{\rightmark}}
\rhead[\fancyplain{}{\leftmark}]%
{\fancyplain{}{\textsc{\footnotesize\thepage}}} \cfoot{}

\mainmatter

% ***************************************************************** %
% Cuerpo
% ***************************************************************** %
% De aquí en adelante se desarrollan los capítulos numerados de la monografía

% ***************************************************************** %
% INICIO DE estructura tentativa de la Propuesta
% ***************************************************************** %

\chapter{Introducción}

Este documento es una descripción del cómo se ha desarrollado el servicio Web que prestará una aplicación basada en simulación de eventos discretos, basada en GALATEA \citep{Galatea} , el cual es un software para simulación de sistemas multi-agentes producto de dos líneas de investigación: lenguajes de simulación basados en la teoría de simulación de Zeigler y agentes basados en lógica. La simulación es un herramienta que poseen los investigadores, ingenieros y profesionales para modelar sus experimentos y probarlos en un ambiente controlado. En el campo de la ingeniería la simulación se ha convertido en una herramienta fundamental y muy útil para cualquier tipo de trabajo. El desarrollo de la computación ha permitido que el campo de la simulación crezca de manera muy apresurada y ha permitido que se cuente con herramientas muy avanzadas, de fácil acceso y manipulación para simular. 

Con el desarrollo del internet y el acceso que la mayoría de personas tenemos a él de manera sencilla, debemos pensar que desarrollar un software de simulación ejecutado en la web seria una herramienta muy poderosa e importante, que ayudaría en el trabajo a muchísimas personas de distintos campos y áreas. El propósito de éste trabajo es que el sistema de simulación web sirva para proveer un servicio de simulación de eventos discretos al usuario desde cualquier punto de mundo con una conexión a internet. Así también, se han previsto características de seguridad mediante las cuales, ante una petición al computador (request), ésta sea procesada sólo si ha sido previamente validada la identidad y autorización de los solicitantes.

Actualmente existen muchas herramientas que permiten diseñar y desarrollar aplicaciones web, como \cite{django}. Estas herramientas están muy bien documentadas y son muy flexibles, lo cual permite la integración con distintos softwares. Esta flexibilidad nos permite la integración entre un simulador de eventos discretos como GALATEA y una aplicación web.


\section{Antecedentes}

Como trabajos similares a esta propuesta se pueden mencionar los descritos en \citep{Galatea} el donde se relata la fase de desarrollo, cómo surge y hacia donde se proyecta GALATEA. Implementada como una plataforma libre para simulación de sistemas multi-agente, que incorpora estrategias de simulación bien conocidas con la que cualquier modelista o simulista puede ensayar dichas estrategias en problemas de simulación de sistemas complejos. 

Otro precedente \citep{tesisBruno}, trata de una tesis de pre-grado que expone el desarrollo de un servicio web para la Modeloteca de un Sistema Nacional de Simulación. La misma consistió en buscar, mediante el uso de una aplicación web, la solución al problema existente en el Centro de Simulación y Modelado (CESIMO) de la Universidad de Los Andes, en el cual había dificultades para mantener un registro referente a los proyectos que allí se desarrollaban, lo que como resultado provocaba que a menudo se perdiera información referente a los mismos, ó que incluso se llevara a cabo proyectos de forma innecesaria, ya que trabajos parecidos habrían sido realizado antes. Resultados que, debido a la falta de un repositorio institucional compartido, resultan imposibles de reusar o integrar. El objetivo de este proyecto de pre-grado fue adaptar un CMS, pero dicha adaptación no logró integrar a GALATEA como parte de su funcionalidad.

En su tesis de pre-grado \citep{tesisGustavo}, se buscó implementar y desplegar como servicio, una aplicación utilizada para modelar y simular eventos discretos en sistemas distribuidos, utilizando como medio los servicios web. Mediante el uso del paradigma de arquitectura orientada a servicios (SOA: Service Oriented Architecture. Pero ese trabajo no alcanzó a resolver la complejidad de un servicio basado en SOA y tampoco de lograr la integración con GALATEA.

A partir de estos antecedentes lo que se pretende es, tomando como base GALATEA, adaptarlo como un servicio web en el cual el usuario pueda interactuar con el simulador, sin tener las limitaciones tales como las que pueden suelen surgir al usar sistemas operativos o navegadores diferentes, incluso ante arquitecturas distintas. A su vez, de \citep{tesisBruno}, se buscó obtener la experiencia ganada al desarrollar un Servicio Web en sí. Al igual se toma en cuenta a \citep{tesisGustavo}, buscando implementar y desplegar como servicio, una aplicación utilizada para modelar y simular eventos discretos en sistemas distribuidos, utilizando como medio los servicios web. A pesar de que ambas experiencias desarrollaron soluciones, aún no es posible contar con la experiencia de uso remoto de GALATEA como un servicio Web configurado por expertos administradores, pero con todas las facilidades y características del simulador al alcance de cualquier usuario registrado. 

Nuestro enfoque ha sido desarrollar una app web con un diseño MVC a implementar sobre/con el framework Django. El modelo vista controlador (MVC) \citep{modeloVistaControlador} es un patrón de diseño de software, que separa los datos y la lógica de una aplicación de la interfaz de usuario y el módulo encargado de gestionar los eventos y las comunicaciones. Para ello MVC propone la construcción de tres componentes distintos que son el modelo, la vista y el controlador, es decir, por un lado define componentes para la representación de la información, y por otro lado para la interacción del usuario. Este patrón de arquitectura de software se basa en las ideas de reutilización de código y la separación de conceptos, características que buscan facilitar la tarea de desarrollo de aplicaciones y su posterior mantenimiento. Este patrón de diseño es muy popular en el marco de aplicaciones web ya que su abstracción permite escribir software altamente desacoplado y fácil de mantener y escalar. 

Django es un framework de desarrollo web de software libre, escrito en Python, que respeta el patrón de diseño conocido como Modelovistacontrolador. La meta fundamental de Django es facilitar la creación de sitios web complejos. Django pone énfasis en el re-uso, la conectividad y extensibilidad de componentes, el desarrollo rápido y el principio No te repitas (DRY, Don't Repeat Yourself) \citep{django}. Python es usado en todas las partes del framework, incluso en configuraciones, archivos, y en los modelos de datos. Django permite construir aplicaciones web rápidamente, gracias a su filosofía de baterías incluidas, es decir, que incluye una inmensa gama de características comunes a la mayoría de las aplicaciones web como las validaciones , autentificación de usuarios, manejo de sesiones entre muchos otros \citep{django}. 

Podemos mencionar también a \citep{tesisJesus}, que en su proyecto de grado y utilizando MVC y Django como herramientas fundamentales desarrolló un sistema de monitoreo distribuido de enlaces de redes a través de un servicio web centralizado. Este servicio además hace  énfasis en la visualización de los datos recolectados a partir de pruebas periódicas.

\section{Planteamiento del problema}

La preocupación por los sistemas distribuidos y de cómo diferentes máquinas podían comunicarse entre sí surgió en la década de los 90. Hasta ese momento, era suficiente con que las aplicaciones de un mismo ordenador pudieran establecer una comunicación. 

En la medida que se ha avanzado en términos tecnológicos, se percibe un crecimiento proporcional de la información que se genera en todos los ámbitos, sea científico, humanístico, económico etc. Estos fenómenos no suceden como acontecimientos aislados, sino que son posibles gracias al conocimiento adquirido y al esfuerzo de muchos, de ponerlo a disposición de quien desee acceder a ellos. Teniendo en cuenta el acceso libre y continuo de la información, surge el planteamiento del problema, el cual tiene dos vertientes, la primera, consiste en que no se dispone de una plataforma web acondicionada para que, de manera fácil y rápida se pueda hacer uso del simulador GALATEA. Los usuarios y usuarias del Centro de Simulación y Modelado (CESIMO) de la Universidad de los Andes, suelen tener muchas dificultades para ejecutar los modelos de simulación en el simulador GALATEA, especialmente al momento de configurar y activar todas sus funcionalidades. 

Si bien se posee un servidor académico en CESIMO, es necesario desarrollar mecanismos que posibiliten el uso de las herramientas que éste ofrece, por ello la necesidad de servicios web que permitan que las funcionalidades que posee el simulador estén disponibles tanto a nivel local como a nivel externo. La plataforma desarrollada en éste trabajo permitirá y estimulará el trabajo colaborativo y cooperativo entre los usuarios de simulación, lo que se puede llamar "Simulación 2.0". 

En cuanto al otro aspecto, consiste en verificar que la integridad de la información estén garantizados, en especial cuando el usuario desee enviar algún dato, o realizar alguna consulta, por lo cual el sistema debe validar a dicho usuario previamente.

\section{Justificación}

Dado que las organizaciones protegen sus redes mediante firewalls -que filtran y bloquean gran parte del tráfico de Internet-, cierran casi todos los puertos TCP salvo el 80, que es, precisamente, el que usan los navegadores. Los servicios Web utilizan este puerto, por la simple razón de que no resultan bloqueados. Es importante señalar que los servicios web se pueden utilizar sobre cualquier protocolo, sin embargo, TCP es el más común. 

La principal motivación para realizar este trabajo, es la de desarrollar un sistema web que sirva como base para la simulación de eventos discretos, esperando que un sistema web amplíe la base de usuarios y usuarias del simulador liberándolos del trabajo de configuración y permitiendo acceder a los modelos de simulación, al igual ponerlos en contacto con diferentes expertos que trabajan en el CESIMO y así validar sus modelos de simulación y compartir conocimientos. La justificación, además, es hacer que el simulador sea amigable a la web, para así, aprovechar todas las ventajas que nos proporciona.


\section{Alcance}

El proyecto culmina con el diseño e implementación de un sistema web para el uso de GALATEA. Se desarrolló un prototipo de esa arquitectura, implementando el sistema web para la ejecución de los modelos de simulación. El prototipo cubre todo lo referente a la edición y compilación de los modelos, además de ejecución de simulaciones. Adicionalmente, la arquitectura del mismo permite adaptarse al contexto del usuario, y reaccionar en base a la interacción del usuario con el sistema.

\section{Objetivos}


\subsection{Objetivo general}

Diseñar e implementar un sistema web para los usuarios y usuarias, modelistas y simulistas  del simulador de eventos discretos GALATEA, que les permita realizar todas las tareas habituales de modelado, codificación y análisis en sus computadores y en la forma que prefieran, pero permitiéndoles realizar las tareas automáticas de compilación, gestión de archivos, simulación y gestión de salidas, en el espacio virtual y con los recursos compartidos de un servidor Web. 


\subsection{Objetivos específicos}

\begin{enumerate}

\item Desarrollar un sistema web que permita el control de usuarios junto con los roles a ser utilizados en el sistema.
\item Diseñar e implementar una arquitectura de software que permita la comunicación entre el software de simulación y el sistema web.
\item Instalar y configurar en un servidor la arquitectura de software para el sistema de simulación.
\item Incorporar el simulador GALATEA como servicio para el sistema web.
\item Diseñar y desarrollar un cliente GUI/controlador para un modelo que se pueda gestionar archivos y simular con GALATEA a través del sistema web desarrollado.
\item Sistematizar la experiencia de uso del sistema web para simulación.
\item Analizar el sistema web desarrollado y establecer las conclusiones. 


\end{enumerate}


\section{Metodología}

Para el desarrollo del proyecto, se utilizó una metodología en espiral. El modelo en espiral es un modelo del ciclo de vida del software donde el esfuerzo del desarrollo es iterativo \citep{modeloEspiral}. Cada ciclo de la espiral representa una fase del desarrollo de software, cada uno de los ciclos consiste de los siguientes pasos:

\begin{enumerate}

\item Determinar o fijar los objetivos. En este paso se definen los objetivos específicos para posteriormente identificar las limitaciones del proceso y del sistema de software, además se diseña una planificación detallada de gestión y se identifican los riesgos.

\item Análisis del riesgo. En este paso se efectúa un análisis detallado para cada uno de los riesgos identificados del proyecto, se definen los pasos a seguir para reducir los riesgos y luego del análisis de estos riesgos se planean estrategias alternativas.

\item Desarrollar, verificar y validar. En este tercer paso, después del análisis de riesgo, se elige un paradigma para el desarrollo del sistema de software.

\item Planificar. En este último paso es donde el proyecto se revisa y se toma la decisión si se debe continuar con un ciclo posterior al de la espiral. Si se decide continuar, se desarrollan los planes para la siguiente fase del proyecto.

\end{enumerate}

Se realizaron cuatro ciclos, el primero correspondió a la realización de un sistema web simple que permitiera el control y administración de usuarios (Registrar, logearse y editar información).

El segundo ciclo se enfoco en el desarrollo de un administrador de archivos y carpetas dentro de nuestro sistema web, permitirle a los usuarios crear, modificar y eliminar archivos y carpetas.

El tercer ciclo estuvo definido por la integración entre el motor de simulación GALATEA y nuestro sistema web. Diseñando y desarrollando los enfoques necesarios para su correcto funcionamiento dentro del sistema, al igual su fácil manejo por parte del usuario.

El cuarto ciclo consistió en hacer análisis del rendimiento del sistema y hacer las optimizaciones necesarias para ofrecer una calidad de servicio apropiada.

\section{Estructura del documento}

\begin{description}

\item Capítulo I. Introducción.

En esa sección se describe brevemente las características del problema abordado en el proyecto, analizando los antecedentes, delimitando los objetivos y estableciendo la metodología con que se procedió al estudió y resolución del mismo.

\item Capítulo II. Marco teórico.

En ese sección se exponen algunos conceptos relacionados con el problema planteado en el proyecto. Se da una breve introducción sobre los términos y herramientas utilizados para desarrollar el mismo.

\item Capitulo III. Desarrollo del Sistema WEB.

Contiene el diseño general del sistema de simulación, así como la arquitectura de la aplicación web, sus sub-sistemas, componentes relevantes y casos de uso.

\item Capitulo IV. Integración de GALATEA.

Contiene la arquitectura, el diseño y desarrollo de los programas de integración con el motor de simulación GALATEA que será ejecutado como una aplicación en un servidor.

\item Capítulo V. Pruebas.

En esta sección de exponen las distintas pruebas realizadas a la aplicación web, definición, implementación y el resultado, así mismo hacemos un estudio de los resultados obtenidos.

\item Capítulo VI. Conclusiones y Recomendaciones.

Conclusiones y Recomendaciones, contiene las conclusiones obtenidas a partir del diseño e implementación del sistema, así como recomendaciones y posibles mejoras a incluir en trabajos futuros.

\item Finalmente se presentan los apéndices y las referencias bibliográficas.

\end{description}

\chapter{Marco teórico-funcional}

La simulación por computadora se ha convertido en una parte útil del modelado de muchos sistemas naturales en física, química y biología, y sistemas humanos como la economía y las ciencias sociales (sociología computacional) \citep{sociologiaComputacional}, su comportamiento cambiará cada simulación según el conjunto de parámetros iniciales supuestos por el entorno. En éste capítulo se explican en detalle las herramientas, tecnologías y conceptos usados para la consecución del proyecto que se propone. Definimos la simulación de eventos discretos DEVS (Discrete Event Simulation) \citep{discretSimulation}, así mismo nos introducimos en GALATEA, con el fin de proporcionar una base inicial para la codificación del nuevo sistema. Explicamos las ventajas de un servicio web y las herramientas empleadas para el desarrollo del mismo, como lo serian el Patrón de diseño Modelo Vista Controlador (MVC) \citep{modeloVistaControlador} y Django \citep{django}.

\section{Simulación Distribuida} 

Las simulaciones distribuidas pueden hacerse de forma que se acelere una simulación o que se acelere la ejecución de un conjunto de simulaciones. Los sistemas de simulación basados en agentes se pueden utilizar con éxito en ambos tipos de simulaciones distribuidas \citep{simulacionDistribuida}.

La Simulación Distribuida permite conducir modelos de simulación a través de múltiples hosts o computadoras separados por redes y se ocupa de cuestiones que surgen de la distribución de un programa de simulación de eventos discretos en varias computadoras \citep{discretSimulation}. La simulación paralela de eventos discretos se refiere a la ejecución en plataformas multi-procesador que contienen múltiples unidades de procesamiento  que interaccionan entre sí con frecuencia, por ejemplo, miles de veces por segundo.

\section{Simulación de Eventos Discretos}

La simulación de eventos discretos es la "imitacion" de un proceso de operación o de un sistema del mundo real construido sobre la base del tiempo \citep{discretSimulation}. Esta codifica el comportamiento de sistemas complejos como una secuencia de eventos ordenados y bien definidos. En simulación de eventos discretos (DEVS por sus siglas en ingles),  el funcionamiento de un sistema se representa como una secuencia cronológica de los acontecimientos. Cada evento tiene lugar en un instante de tiempo y marca un cambio de estado en el sistema. Frente a su homóloga, la simulación de tiempo continuo, esta se caracteriza por un control en la variable del tiempo que permite avanzar a éste a intervalos variables, en función de la planificación de ocurrencia de tales eventos a un tiempo futuro. Estos sistemas se caracterizan por mantener un estado interno global del sistema, que puede no obstante estar física o lógicamente distribuido, y que cambia parcialmente debido a la ocurrencia de un evento. La ejecución de un evento puede desencadenar la generación de nuevos eventos futuros. Cada uno está marcado por su tiempo, por lo que el orden de generación puede no coincidir con el orden de ejecución.

\section{GALATEA}

Galatea es una plataforma para simulación de eventos discretos, DEVS, con una semántica basada a una red de nodos como metáfora del sistema a simular, la misma semántica matríz del sistema Glider, el proyecto materno local, que fuera formalizada como parte del nuevo proyecto y luego generalizada para luego re-acomodar la simulación continua, la simulación de sistemas multi-agentes y la simulación distribuida, simulación con autómatas celulares y simulación con modelos explícitos de espacios urbanos o arquitectónicos \citep{Galatea}.

Podemos explicar de forma  breve y concisa en que consiste la misma, según \citep{Galatea}:

\begin{quote}
	Galatea es una plataforma libre para simulación de sistemas multi-agente que incorpora estrategias de simulación bien conocidas con la que cualquier modelista o simulista puede ensayar esas estrategias en problemas de simulación de sistemas complejos. La historia de Galatea comienza mucho antes que se planteara formalmente el proyecto con ese nombre. En 1993, nuestro muy joven Centro de Simulación y Modelos, CeSiMo, propone un proyecto para explorar la re-implementación de la plataforma de simulación Glider sobre una plataforma orientada a objetos dando origen a un prototipo experimental. El problema del cambio estructural, inspirado por investigaciones en economía, se había convertido entonces en uno de los objetivos de investigación fundamentales del CeSiMo y vendría a dictar también la pauta para Galatea. La noción de agente hizo su aparición en algunos reportes internos en los que se enfatizaba su importancia para modelar sistemas complejos como una economía nacional. En 1998 se planteó la posibilidad de integrar Glider con herramientas de inteligencia artificial para modelar agentes. En el 2000, un proyecto vendría a combinar aquel prototipo de 1993, con una teoría de agentes basada en lógica computacional que se planeaba integrar en una nueva teoría de simulación de sistemas multi-agentes. Allí nació Galatea. El logro fundamental para el proyecto, sin embargo, llegaría con las aplicaciones. En 2004, Galatea fue incorporada al banco de pruebas de un proyecto en biocomplejidad. Y en 2009-2011 fue usada como cama de pruebas de un sistema de agentes que aprenden \citep{jacintoLibro}.
\end{quote}

\subsection{La arquitectura de la plataforma Galatea}

La arquitectura de GALATEA está basada en objetos. Tanto los agentes como el simulador principal están desarrollados de acuerdo a dicho diseño (orientado a objetos OOD), para apoyar la distribución, la modularidad, la escalabilidad y la interactividad como lo exige la especificación HLA (High Level Architecture) \citep{highLevelArchitecture}. El lenguaje base usado para su desarrollo es el Java \citep{Galatea}. Usando como lenguaje base Java, se especificó un nuevo lenguaje de simulación al que denominan lenguaje Galatea. La sintaxis del lenguaje Galatea es, de hecho, una mezcla de la sintaxis Glider, las estructuras básicas de Java y las reglas de conductas de los agentes escritas en los lenguajes de programación lógica Actilog \citep{actilog} y Openlog \citep{openlog}. La compleja semántica de Galatea establece que el código Java sea compilado y ejecutado por el motor de simulación de eventos discretos, mientras que las reglas de los agentes son interpretadas por un motor de inferencia implementado sobre una máquina Prolog  \citep{Galatea}. Es una plataforma mixta, que corre sobre máquinas virtuales Java y Prolog.

En la figura \ref{ejecucionGalatea} podemos observar la ejecución del modelo "SimpleTeller", que se encuentra entre los ejemplos básicos de GALATEA. En este modelo define un taquilla de un banco, la cual posee una entrada "Gate (I)" y una salida "Exit (E)". Las personas que entran llegan a un cajero de banco a intervalos de tiempo tomadas al azar de una distribución exponencial con la media "InArrTime". Se sirven uno a la vez. Los tiempos de servicio se toman de una distribución gaussiana con media "MeSerTime" y desviación estándar "DeSerTime".

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.5]{img/codigoTaquillaGalatea.png}
	\caption{Estructura del modelo SimpleTeller.}
	\label{codigoTaquillaGalatea}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.5]{img/ejecucionGalatea1.png}
	\caption{Ejecución del ejemplo SimpleTeller.}
	\label{ejecucionGalatea}
\end{figure}


\section{Servicio Web}

Un servicio web (Web Service) es una tecnología que utiliza un conjunto de protocolos y estándares que sirven para intercambiar datos entre aplicaciones. Distintas aplicaciones de software desarrolladas en lenguajes de programación diferentes, y ejecutadas sobre cualquier plataforma, pueden utilizar los servicios web para intercambiar datos en redes de ordenadores como Internet. La World Wide Web Consortium lo define como ...un sistema de software diseñado para soportar interacción interoperable máquina a máquina sobre una red. Este tiene una interface descrita en un formato procesable por una máquina (específicamente WSDL). Otros sistemas interactúan con el servicios web en una manera prescrita por su descripción usando mensajes SOAP, típicamente enviados usando HTTP con una serialización XML en relación con otros estándares relacionados con la web \citep{servicioWeb}. 


\section{Herramientas usadas para el desarrollo del sistema}

A continuación se describen las herramientas usadas para el desarrollo del sistema web de simulación de eventos discretos GALATEA:

\subsection{Modelo Vista Controlador (MVC)}

El modelo vista controlador (MVC) es un patrón de diseño de software, que separa los datos y la lógica de una aplicación de la interfaz de usuario y el módulo encargado de gestionar los eventos y las comunicaciones. Para ello MVC propone la construcción de tres componentes distintos que son el modelo, la vista y el controlador, es decir, por un lado define componentes para la representación de la información, y por otro lado para la interacción del usuario. Este patrón de arquitectura de software se basa en las ideas de reutilización de código y la separación de conceptos, características que buscan facilitar la tarea de desarrollo de aplicaciones y su posterior mantenimiento. Este patrón de diseño es muy popular en el marco de aplicaciones web ya que su abstracción permite escribir software altamente desacoplado y fácil de mantener y escalar. La figura \ref{mvc} muestra la relación entre los módulos de MVC.


Los modelos son los componentes de la aplicación del sistema que realmente hacen el trabajo. Se mantienen muy distintos de las vistas, que muestran aspectos de los modelos. Los controladores se utilizan para enviar mensajes a los modelos, y proporcionar la interfaz entre el modelo con sus vistas asociadas y los dispositivos de interfaz de usuario interactivas (por ejemplo, teclado, ratón). Cada vista se puede pensar que está estrechamente vinculada con un controlador, que tienen cada uno exactamente un modelo, sino un modelo puede tener muchos pares vista / controlador \citep{modeloVistaControlador}.

\subsubsection{Modelo}

El modelo es un conjunto de clases que representan la información del mundo real que el sistema debe procesar, así por ejemplo un sistema de administración de datos climatológicos tendrá un modelo que representará la temperatura, la humedad ambiental, el estado del tiempo esperado, etc. sin tomar en cuenta ni la forma en la que esa información va a ser mostrada ni los mecanismos que hacen que esos datos estén dentro del modelo, es decir, sin tener relación con ninguna otra entidad dentro de la aplicación \citep{modeloVistaControladorBascon}.

\begin{lstlisting}
"""folder model"""
class Folder(models.Model):
	"""Atributes"""
	user =  models.ForeignKey(User, on_delete=models.CASCADE)
	name = models.CharField(max_length=500)
	path = models.CharField(max_length=1000)
	father = models.IntegerField(default=0)
	active = models.BooleanField(default=True)
	permission = models.IntegerField(default=0, choices=STATUS_PERMISSION)
"""file model"""
class File(models.Model):
	"""Atributes"""
	folder =  models.ForeignKey(Folder, on_delete=models.CASCADE)
	name = models.CharField(max_length=500)
	active = models.BooleanField(default=True)
	permission = models.IntegerField(default=0, choices=STATUS_PERMISSION)
\end{lstlisting}

Los modelos dentro de nuestro sistema son representados en clases, las cuales a su vez representan los objetos a ser almacenados dentro de nuestra base de datos. Los modelos de datos "Folder" y "File", se representan junto con sus atributos, tipos de datos y relaciones.

\subsubsection{Vista}

Las vistas son el conjunto de clases que se encargan de mostrar al usuario la información contenida en el modelo. Una vista está asociada a un modelo, pudiendo existir varias vistas asociadas al mismo modelo; así por ejemplo, se puede tener una vista mostrando la hora del sistema como un reloj analógico y otra vista mostrando la misma información como un reloj digital \citep{modeloVistaControladorBascon}.

\begin{lstlisting}
{% extends 'website/base.html' %}
{% load staticfiles %}

{% block title_page %}Tesis| Dashboard{% endblock %}

{% block title_content %}
	Dashboard
	<small>Index</small>
{% endblock %}

{% block level %}
	<li><a href="{% url 'website:admin_index' %}"><i class="fa fa-dashboard"></i> Dashboard</a></li>
	{% if root_folder.father != 0 %}
		<li><a href="{% url 'website:admin_show_folder' root_folder.father %}"><i class="fa fa-folder"></i> Folder UP</a></li>
	{% endif %}
	<li class="active">Index</li>
{% endblock %}

{% block content %}
	<div class="row">
			<div class="col-xs-6">
				<a href="#" data-toggle="modal" data-target="#myModal" class="btn btn-block btn-warning">New Folder</a>
			</div>
			<div class="col-xs-6">
				<a href="#" data-toggle="modal" data-target="#myModalEdit" class="btn btn-block btn-primary">Edit Folder</a>
			</div>
			<div class="col-xs-6">
				<a href="#" data-toggle="modal" data-target="#myModalDelete" class="btn btn-block btn-danger">Delete Folder</a>
			</div>
			<div class="col-xs-6">
				<a href="#" data-toggle="modal" data-target="#myModalNewFile" class="btn btn-block btn-success">New File</a>
			</div>
			<div class="col-xs-6">
				<a href="#" data-toggle="modal" data-target="#myModalUploadFile" class="btn btn-block btn-primary">Upload File</a>
			</div>
			<div class="col-xs-6">
				<a href="#" data-toggle="modal" data-target="#myModalMove" class="btn btn-block btn-warning">Move Folder</a>
			</div>
			<div class="col-xs-6">
				<a href="#" data-toggle="modal" data-target="#myNewProject" class="btn btn-block btn-warning">New Project</a>
			</div>
	</div>
	<div class="box">
		<div class="box-header">
			<h3 class="box-title">Admin Dashboard</h3>
		</div>
		<div class="box-body">
		{% for folder in folders %}
			<a class="btn btn-app" href="{% url 'website:admin_show_folder' folder.id %}">
			<i class="fa fa-folder"></i> {{folder.name}}
			</a>
			{% endfor %}
			{% for file in files %}
			<a class="btn btn-app" href="{% url 'website:admin_show_file' file.id %}">
			<i class="fa fa-file"></i> {{file.name}}
			</a>
		{% endfor %}
		</div><!-- /.box-body -->
	</div><!-- /.box -->
{% endblock %}

\end{lstlisting}

Esta vista es un archivo html, la cual define la forma en que los datos van a ser mostrados al usuario. La vista "show folder" muestra la información almacenada dentro de la carpeta.

\subsubsection{Controlador}

El controlador es un objeto que se encarga de dirigir el flujo del control de la aplicación debido a mensajes externos, como datos introducidos por el usuario u opciones del menú seleccionadas por él. A partir de estos mensajes, el controlador se encarga de modificar el modelo o de abrir y cerrar vistas. El controlador tiene acceso al modelo y a las vistas, pero las vistas y el modelo no conocen de la existencia del controlador \citep{modeloVistaControladorBascon}.

\begin{lstlisting}
@login_required(login_url="/login/")
@has_role_decorator('system_admin')
def admin_folder_show(request,folder_id):
	user = User.objects.get(id = request.user.id)
	root_folder = Folder.objects.get(id=folder_id)
	folders = Folder.objects.filter(father=root_folder.id)
	files = File.objects.filter(folder = root_folder.id)
	all_folders = Folder.objects.filter(user = user.id)
	if root_folder.father == 0:
		return redirect("/admin/")
	return render(request,'admin/show_folder.html',{'root_folder':root_folder,'folders':folders,'files':files, 'all_folders':all_folders})

\end{lstlisting}

Este controlador es el encargado de enlazar la petición realizada por el usuario sobre un modelo de datos, y ser relacionada con su vista correspondiente, para su posterior visualización por parte del usuario. En la fracción de código mostrada vemos el controlador asociado a "show folder", el cual busca el modelo "folder" y lo asocia a su vista correspondiente "show\_folder.html".

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/RelacionesMVC.png}
	\caption{Relaciones entre los módulos del patrón MVC.}
	\label{mvc}
\end{figure}

\subsection{Django}

Django \citep{django} es un framework de desarrollo web de código abierto, escrito en Python, que respeta el patrón de diseño conocido como Modelovistacontrolador. La meta fundamental de Django es facilitar la creación de sitios web complejos. Django pone énfasis en el re-uso, la conectividad y extensibilidad de componentes, el desarrollo rápido y el principio No te repitas (DRY, Don't Repeat Yourself) \citep{django}. Python es usado en todas las partes del framework, incluso en configuraciones, archivos, y en los modelos de datos. Django permite construir aplicaciones web rápidamente, gracias a su filosofía de baterías incluidas, es decir, que incluye una inmensa gama de características comunes a la mayoría de las aplicaciones web como las validaciones , autentificación de usuarios, manejo de sesiones entre muchos otros \citep{django}.

\subsubsection{Funcionamiento de Django}

Cuando Django recibe una petición ésta pasa por un despachador de URLs (URL Dispatcher), cuya tarea es emparejar el URL con una vista y delegar a la vista el manejo de la petición. La vista contiene la lógica necesaria pa atender la petición entrante. Generalmente esto consiste en retirar o actualizar algunos datos del modelo, que a su vez se comunica con el manejador de base de datos, finalmente la vista combina los datos retirados de la base de datos, la petición y la sesión activa con una plantilla (template) para generar la respuesta de será devuelta.

Django ha demostrado ser escalable y flexible \citep{tesisJesus}, se sabe de instancias de Django atendiendo ráfagas de cincuenta mil peticiones por segundo \citep{tesisJesus}, además cuenta con una extensa comunidad de colaboradores y amplia documentación.

\subsection{Bases de Datos}

Una base de datos o banco de datos es un conjunto de datos pertenecientes a un mismo contexto y almacenados sistemáticamente para su posterior uso. En este sentido; una biblioteca puede considerarse una base de datos compuesta en su mayoría por documentos y textos impresos en papel e indexados para su consulta. Actualmente, y debido al desarrollo tecnológico de campos como la informática y la electrónica, la mayoría de las bases de datos están en formato digital, siendo este un componente electrónico, por tanto se ha desarrollado y se ofrece un amplio rango de soluciones al problema del almacenamiento de datos. 

Según \citep{baseDato}, una base de datos es una colección de datos estructurados. Puede ser cualquier cosa desde una simple lista de compras. una galería de fotos o las bastas cantidades de información en una red corporativa. Para agregar, acceder y procesar los datos almacenados en una base de datos, se necesita un sistema manejador de base de datos. Ya que los computadores hacen un muy buen trabajo manejando grandes cantidades de datos, los sistemas manejadores de bases datos juegan un papel central en la computación como utilidades independientes o partes de otras aplicaciones.

El sistema web de simulación permite la administración de usuarios, archivos y carpetas. De los cuales debemos guardar y consultar toda la información necesaria continuamente, para ello usamos una base de datos la cual definimos en la sección \ref{BaseDatos}.

Debido a su alta confiabilidad y estabilidad, se utilizaron sistemas manejadores de bases de datos relacionales como: MySQL y PostgreSQL. Ambos manejadores fueron usados durante el desarrollo del sistema, para probar la portabilidad y funcionalidad del mismo. Debido a que Django utilizada MVC, permite variar el manejador de base de datos, sin modificar ningún elemento entre los modelos de nuestros datos.

\subsubsection{MySQL}

Mysql es un sistema manejador de bases de datos relacionales (RDBMS por sus siglas en ingles) de código abierto bajo la licencia GPL (GNU General Public License). Mysql se caracteriza por ser rápido, confiable escalable y fácil de usar, es posible instalar Mysql tanto en una maquina junto a otras aplicaciones como servidores web o también instalarlo en máquinas dedicadas para que use todo el poder de cómputo disponible. Mysql posee características para ejecutarse en clusters de máquinas junto con un motor de replicación para obtener una alta escalabilidad \citep{baseDato}. 

\subsubsection{PostgreSQL}

PostgreSQL es un sistema de base de datos de gran alcance, de código abierto objeto-relacional. Cuenta con más de 15 años de desarrollo activo y una arquitectura probada que se ha ganado una sólida reputación de fiabilidad, integridad de datos y correctitud. Se ejecuta en todos los principales sistemas operativos, incluyendo Linux, UNIX, y Windows. Es totalmente compatible con ACID, tiene soporte completo para claves foráneas, combinaciones, vistas, triggers y procedimientos almacenados (en varios idiomas). Incluye más SQL: 2008 tipos de datos, incluyendo entero, numérico, Boolean, CHAR, VARCHAR, DATE, INTERVALO y TIMESTAMP. También es compatible con el almacenamiento de objetos binarios grandes, como imágenes, sonidos, o de vídeo. Tiene interfaces de programación nativo de C / C ++, Java, .Net, Perl, Python, Ruby, Tcl, ODBC, entre otros, y la documentación excepcional \citep{baseDatoPostgresql}.

\subsubsection{Mapeo Objeto-Relacional}

El Mapeo Objeto-Relacional (ORM por sus siglas en ingles) es un método para interacturar con bases de datos relacionales desde el paradigma de la programación orientada a objetos, de esta manera es posible aprovechar conceptos como herencia y polimorfismo. Es una técnica de programación para convertir datos entre el sistema de tipos utilizado en un lenguaje de programación orientado a objetos y la utilización de una base de datos relacional como motor de persistencia. En la práctica esto crea una base de datos orientada a objetos virtual, sobre la base de datos relacional. Esto posibilita el uso de las características propias de la orientación a objetos (básicamente herencia y polimorfismo).

El uso de un ORM simplifica enormemente el manejo de la estructura de datos subyacente ya que permite al programador manejar los datos a un mayor nivel de abstracción como si fueran objetos, sin necesidad de general manualmente las consultas SQL, además ésta capa de abstracción permite desacoplar el código de la aplicación de los detalles específicos de cada RDBMS \citep{tesisJesus}.

\subsection{JSON}

JSON (JavaScript Object Notation) es un formato textual de intercambio y almacenamiento de datos no estructurados, JSON posee un formato que es fácil de leer para humanos y fácil de interpretar para máquinas y más ligero que XML por lo que se ha popularizado para el desarrollo de APIs. JSON es un formato de texto que es completamente independiente del lenguaje, pero utiliza las convenciones que son familiares para los programadores de la familia de lenguajes C, incluyendo C, C++, C\#, Java, JavaScript, Perl, Python, y muchos otros. Estas propiedades hacen JSON un lenguaje ideal de intercambio de datos.

\begin{lstlisting}
@login_required(login_url="/login/")
@has_role_decorator('system_admin')
def admin_compile_file(request, file_id):
	file = File.objects.get(id=file_id)
	com_java = compile_java(file.id)
	return JsonResponse({"data":com_java})

@login_required(login_url="/login/")
@has_role_decorator('system_admin')
def admin_execute_file(request, file_id):
	#get arguments for compilation
	arguments =  request.GET['arguments']
	file = File.objects.get(id=file_id)
	com_java = execute_java(file.id, arguments)
	return JsonResponse({"data":com_java})
\end{lstlisting}

Las llamadas de compilación y ejecución de los modelos de simulación, haces uso del formato JSON para el retorno de la información a la vista del usuario.

\subsection{AJAX}

AJAX (Asynchronous JavaScript And XML), es una técnica de desarrollo web para crear aplicaciones interactivas o RIA (Rich Internet Applications). Estas aplicaciones se ejecutan en el cliente, es decir, en el navegador de los usuarios mientras se mantiene la comunicación asíncrona con el servidor en segundo plano. De esta forma es posible realizar cambios sobre las páginas sin necesidad de recargarlas, mejorando la interactividad, velocidad y usabilidad en las aplicaciones. Ajax es una tecnología asíncrona, en el sentido de que los datos adicionales se solicitan al servidor y se cargan en segundo plano sin interferir con la visualización ni el comportamiento de la página, aunque existe la posibilidad de configurar las peticiones como síncronas de tal forma que la interactividad de la página se detiene hasta la espera de la respuesta por parte del servidor \citep{ajaxManual}.

\begin{lstlisting}
<script type="text/javascript">
var editor = CodeMirror.fromTextArea(document.getElementById("info_file"), { lineNumbers: true, matchBrackets: true, mode:  "text/x-java" });
$( "#compile_file" ).click(function() {
	$("#code_file").text("Compiling file");
	$.ajax({
		url : "{% url 'website:admin_compile_file' file.id %}", // the endpoint
		type : "GET", // http method
		data : {  }, // data sent with the post request
		
		// handle a successful response
		success : function(json) {
			console.log(json); // log the returned json to the console
			console.log("success"); // another sanity check
			$("#code_file").text(json.data);
			$("#code_file").text("Compiled file");
		},
		
		// handle a non-successful response
		error : function(xhr,errmsg,err) {
			console.log("Error"); // provide a bit more info about the error to the console
		}
	});
});

$( "#execute_file" ).click(function() {
	$("#code_file").text("Compiling file");
	$.ajax({
		url : "{% url 'website:admin_execute_file' file.id %}", // the endpoint
		type : "GET", // http method
		data : { arguments: $('#arguments').val() }, // data sent with the post request
		
		// handle a successful response
		success : function(json) {
			console.log($('#arguments').val());
			console.log(json); // log the returned json to the console
			console.log("success"); // another sanity check
			$("#code_file").text(json.data);
			$("#data_execution").val(json.data);
			$("#export_data").removeAttr("disabled");
		},
		
		// handle a non-successful response
		error : function(xhr,errmsg,err) {
			console.log("Error"); // provide a bit more info about the error to the console
		}
	});
});
</script>
\end{lstlisting}

Para crear la comunicación asíncrona con el servidor, nuestras llamadas de compilación y ejecución de modelos de simulación se realiza mediante una llamada AJAX. Esto nos permite continuar realizando tareas sobre nuestros modelos de simulación, mediante el servidor ejecuta esos procesos de compilación y ejecución.

\chapter{Desarrollo del Sistema WEB}

El sistema de simulación de eventos discretos mediante la web esta conformado por tres elementos principales: (1) La aplicación Web que funciona como coordinador del sistema, control de usuarios y roles; (2) Administración de archivos que permite llevar el control de acceso, creación y modificación de los archivos y carpetas, (3) El Sistema de Integración con GALATEA, que ofrece las funcionalidades de simulación, conexión y control con el motor de simulación.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.3]{img/estructuraSistema.png}
	\caption{Sistema de Simulación Web GALATEA.}
	\label{estructuraSistema}
\end{figure}

En la figura \ref{estructuraSistema} se observa la relación que existe entre los componentes principales que conforman el sistema. El punto de entrada principal es la aplicación Web, que es la encargada de manejar el acceso de los usuarios a las distintas funcionalidades. Esto lo realiza mediante la implementación de roles de usuarios y manejo de permisologías. La aplicación web controla la visualización, acceso y modificación de los distintos archivos y carpetas, mediante peticiones sobre el módulo de administración de archivos. Otro aspecto fundamental de la aplicación web es el control y visualización de las simulaciones, mediante el acceso al sistema de Integración con GALATEA.

 Para el módulo de Administración de Archivos se desarrolló una API, la cual permite llevar el control de creación, modificación y eliminación de archivos y carpetas dentro del sistema. Esta API está escrita en python y maneja el control de excepciones u errores que pueden aparecer durante su ejecución, al igual permite verificar el espacio en disco usado por cada usuario. En la sección \ref{administracionArchivos} se especifica con mas detalles la funcionalidad de este módulo.

El sistema de Integración con GALATEA es una API de interconexión entre nuestra aplicación web y el simulador GALATEA. Como ambos sistemas están desarrollados en ambientes distintos, con códigos distintos, se buscó desarrollar un mecanismo de comunicación entre ambos sistemas. La API permite crear una instancia del Simulador GALATEA y ejecutarlo, controlar la compilación y los parámetros de ejecución de la simulación, esto lo desarrollamos en python mediante la implementación de control de procesos y socket. En el capítulo siguiente especificaremos a detalle en funcionamiento de este sistema de integración.

\section{Diseño de la aplicación WEB}

Para el desarrollo de esta aplicación se usó el framework de desarrollo web Django que implementa un patrón de diseño MVC.

\subsection{Arquitectura}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/arquitecturaAplicacion.png}
	\caption{Arquitectura de la aplicación web.}
	\label{arquitecturaAplicacion}
\end{figure}

La arquitectura del sistema web de simulación GALATEA consiste en cuatro capas, la capa superior o capa de presentación se ejecuta en el navegador del cliente, para ver los resultados obtenidos de la simulación, visualización de archivos, entre otras acciones que pude realizar el usuario; esta capa se comunica con la capa dos o capa de servicio, que es ejecutada por el servidor web y es la responsable de atender las peticiones de los usuarios del sistema; la capa tres es la encargada de las peticiones a los otros módulos que conforman el sistema, comunicación con el módulo de manejo de archivos e integración con el simulador GALATEA; la capa cuatro o capa de datos aloja los datos de la aplicación como usuarios, archivos, carpetas, modelos, trazas y datos de simulaciones, entre otros.

\subsection{Capa 1: Presentación}

La capa de presentación es la interfaz gráfica que permite la interacción del usuario con el sistema de simulación Web. Esta capa consiste en los despliegues de navegadores en cualquier dispositivo conectado a Internet y su propósito es ofrecer la usuario una interfaz gráfica para ingresar el sistema, configurar y manejar simulaciones, observar resultados, entre otros.

La capa de presentación puede ser extendida para la implementación de distintos front-ends como aplicaciones nativas para sistemas operativos móviles o de escritorio a través de APIs programáticas.

\subsection{Capa 2: Servidor Web}

El servidor web es el punto de entrada a la aplicación, éste responde a las peticiones realizadas desde el front-end a través del protocolo HTTP, el enfoque del servidor web es manejar tareas ligeras de la forma mas rápida posible y retornar respuestas para ofrecer al usuario baja latencia en su interacción con el sistema.

\begin{table}[H]
	\centering

		{\fontsize{10pt}{\baselineskip}\selectfont
			\begin{tabular}[t]{|l|c|}
				\hline
				Ruta & Acción \\\hline
				/static/ & Servicio de archivo estático  \\\hline
				/media/ & Servicio de archivo estático \\\hline
				/ &	re-dirección a la aplicación  \\\hline
			\end{tabular}
		}
		
		\caption {Tabla de enrutamiento del servidor web.} \label{tabla-enrutamineto}
\end{table}

El servidor web debe manejar dos tipos de peticiones: aquellas que requieren respuestas dinámicas ajustadas a los datos específicos que pertenecen a cada usuario en particular y peticiones de archivos estáticos como CSS, JavaScript, imágenes o archivos HTML pre-definidos que cambien poco o rara vez. A pesar de que la aplicación web es capaz de manejar ambos tipos de peticiones, cada una de ellas tendrá que pasar por todo el pipeline de Django (middlewares, resolución de URLs, procesamiento de la vista, etc). Esta complejidad es innecesaria cuando se trata de archivos estáticos y va a sobrecargar el servidor web en entornos de producción.

Para manejar eficientemente todo tipo de peticiones, debemos implementar un mecanismo que sea capaz de servir los archivos estáticos rápidamente y que sirva como proxy entre el front-end y la aplicación web. Hay una gran variedad de servidores como Apache\footnote{Apache https://www.apache.org/}, Nginx\footnote{Nginx https://nginx.org/} o Lighttpd\footnote{Lighttpd https://www.lighttpd.net/} diseñados especialmente con este propósito, éstos tendrán una sencilla tabla de enrutamiento que decidirá cómo manejar las peticiones. La aplicación web podrá correr entonces en un proceso separado y sólo atenderá peticiones dinámicas, así se asegurará la eficiencia en el uso de los recursos computacionales disponibles.

\subsection{Capa 3: Integración de Procesos}

En esta capa integramos los procesos fundamentales para nuestro sistema, como lo son: La integración con el simulador GALATEA y la administración de archivos y carpetas. Se encarga de gestionar todas peticiones realizadas por el usuario ya sea para el manejo de archivos/carpetas o simulaciones, al igual controlar su correcto funcionamiento y resultado. 

\subsection{Capa 4: Datos}

Incluye todos los sistemas encargados de almacenar o alojar los datos en forma persistente ya sea a través de de bases de datos o sistemas de archivos.

\subsubsection{Bases de datos}

La base de datos es el almacén principal de los datos estructurados de la aplicación web, almacena todos tipo de datos de información como datos del usuario, referencias de los archivos, logs de información, entre otras cosas.

El diseño de la base de datos es una de los pilares fundamentales del diseño del sistema, el correcto diseño de las tablas de la base de datos tiene repercusiones importantes en la escalabilidad y tiempo de respuesta del sistema.

\subsubsection{Archivos de usuario}

Los archivos de usuario son de gran importancia a ser manejados en el sistema, estos pueden ser de configuración de perfiles como imágenes, y los archivos de los modelos de simulación que varían desde archivos Java, archivos GALATEA y archivos de texto con información de trazas y ayudas del modelo, entre otros.

Todos estos archivos son almacenamos en un sistema de almacenamiento secundario, el cual es configurado dentro de la aplicación y controlado para su correcto funcionamiento y acceso. Cada usuario cuenta dentro del sistema con una porción de almacenamiento para su uso.

\subsection{Diseño de la Base de Datos}\label{BaseDatos}

Puesto que Django hace uso de un ORM para manejar la base de datos, desde le punto de vista de la aplicación web, cada tabla de la base de datos es una clase, por lo que es posible aprovechar todas las características de la programación orientada a objetos como: herencia de clases, clases abstractas, implementación de métodos específicos a un modelo y sobre carga de métodos.

A continuación se describen los modelos que forman parte  de la base de datos:

Cada usuario registrado esta representado por el modelo \textit{user}, el cual contiene la información básica del usuario y su información de ingreso al sistema. Para información de perfil e imagen se maneja el modelo \textit{UserImage}.

El manejo de roles se define en el modelo \textit{group}, en el cual manejamos dos roles principales: el de \textit{administrador} y el de \textit{usuario}.

Las relaciones de usuarios se maneja mediante \textit{Relationship}, lo cual nos permite definir la relación de \textit{amistad} entre dos usuarios. Esto nos permitirá compartir archivos entre usuarios.

Los archivos son manejados por \textit{File}, que permite definir la información básica y permisología de acceso a los mismos.

Las carpetas están definidas mediante  \textit{Folder}, que contiene la información básica y jerárquica de carpetas. Otro modelo muy relacionado es \textit{DiskSpace}, que nos permite llevar el control de espacio en disco usado por el usuario.

Para compartir un archivo usamos el modelo \textit{ShareFile}, que contiene la información del archivo y sus permisos compartidos.

Las carpetas compartidas en \textit{ShareFolder}, que contienen la información de la carpeta compartida y sus permisos de acceso.

Hay una gran variedad de logs que se manejan los cuales se encuentran en distintas tablas como: \textit{logsfile} para logs de archivos, \textit{logsfolder} para las modificaciones de carpetas, entre otros.

\subsubsection{Diagrama de entidad-relación}

La figura \ref{entidadRelacionPrincipal} muestra las entidades principales y sus relaciones dentro de la base de datos.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.38]{img/entidadRelacionDB.png}
	\caption{Entidades principales de la base de datos.}
	\label{entidadRelacionPrincipal}
\end{figure}

La figura \ref{entidadRelacionUsuarios} muestra las entidades  relacionadas al control y manejo de usuarios, sus roles y perfiles .

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.45]{img/usuariosDB.png}
	\caption{Entidades manejo de usuarios.}
	\label{entidadRelacionUsuarios}
\end{figure}


La figura \ref{entidadRelacionArchivosCarpetas} muestra la relación para el control de archivos y carpetas que puede manejar el usuario.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.55]{img/archivosDB.png}
	\caption{Entidades manejo archivos y carpetas.}
	\label{entidadRelacionArchivosCarpetas}
\end{figure}

La figura \ref{entidadRelacionArchivosCarpetasCompartidos} muestra la relación para el control de archivos y carpetas compartidas entre otros usuarios.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.55]{img/compartidoDB.png}
	\caption{Entidades manejo archivos y carpetas compartidos.}
	\label{entidadRelacionArchivosCarpetasCompartidos}
\end{figure}

\subsubsection{Entidades}

Las siguientes tablas resumen las entidades y la función de las mismas dentro del sistema web:

\begin{table}[H]
	\centering
	
	{\fontsize{10pt}{\baselineskip}\selectfont
		\begin{tabular}[t]{|r|l|}
			\hline
			Nombre de la entidad & Función \\\hline
			\textit{User} & Almacena la información básica de usuario y de acceso al sistema  \\\hline
			\textit{UserImage} & Guarda la imagen del perfil de cada usuario \\\hline
			\textit{Group} &	Define los roles a ser usados dentro del sistema (Administrador y Usuario)  \\\hline
			\textit{Relationship} &	Define las relaciones entre usuarios  \\\hline
		\end{tabular}
	}
	
	\caption {Entidades relacionadas al manejo de usuarios.} \label{tabla-manejo-usuarios}
\end{table}

\begin{table}[H]
	\centering
	
	{\fontsize{10pt}{\baselineskip}\selectfont
		\begin{tabular}[t]{|r|l|}
			\hline
			Nombre de la entidad & Función \\\hline
			\textit{File} & Almacena la información básica de archivo y su permisología de acceso  \\\hline
			\textit{Folder} & Información básica de una carpeta junto a su permisología de acceso \\\hline
			\textit{DiskSpace} & Controla el espacio usado en disco por cada usuario \\\hline
		\end{tabular}
	}
	
	\caption {Entidades relacionadas al manejo de archivos y carpetas.} \label{tabla-manejo-archivos-carpetas}
\end{table}

\begin{table}[H]
	\centering
	
	{\fontsize{10pt}{\baselineskip}\selectfont
		\begin{tabular}[t]{|l|c|}
			\hline
			Nombre de la entidad & Función \\\hline
			\textit{ShareFolder} & Llevar control de la carpeta compartida  \\\hline
			\textit{ShareFile} & Almacenar la información del archivo compartido \\\hline
		\end{tabular}
	}
	
	\caption {Entidades relacionadas al manejo de archivos y carpetas compartidos.} \label{tabla-manejo-archivos-carpetas-compartidos}
\end{table}


\subsubsection{Relaciones}

\begin{itemize}
	\item \textbf{User - UserImage (1-1)}: Un usuario posee una imagen e información de perfil.
	\item \textbf{User - Folder (n-1)}: Un usuario puede poseer una o mas carpetas, pero una carpeta pertenece a un solo usuario.
	\item \textbf{User - DiskSpace (1-1)}: Un usuario tiene un solo espacio en disco asociado y configurado.
	\item \textbf{Folder - File (n-1)}: Una carpeta puede tener muchos archivos almacenados, pero un archivo tiene una carpeta asociada.
	\item \textbf{User - ShareFile (n-1)}: Un usuario puede poseer uno o mas archivos compartidas, pero un archivo pertenece a un solo usuario.
	\item \textbf{File - ShareFile (n-1)}: Un archivo puede estar compartido con muchos usuarios.
	\item \textbf{User - ShareFolder (n-1)}: Un usuario puede poseer una o mas carpetas compartidas, pero una carpeta pertenece a un solo usuario.
	\item \textbf{Folder - ShareFolder (n-1)}: Un carpeta puede estar compartida con muchos usuarios.
	\item \textbf{User - Relationship (n-1)}: Un usuario puede poseer una o mas relaciones de amistad con otros usuarios, pero la relación se define con un solo usuario.
\end{itemize}

\subsection{Diseño de Pantallas}

Todas las pantallas del sistema fueron creadas bajo el paradigma del diseño web adaptable, es decir, que pueden ajustarse a cualquier resolución de pantalla sin reducir la usabilidad o sacrificar la experiencia del usuario, el servidor no tiene que decidir entre un conjunto de plantillas para distintas resoluciones, sino que envía al cliente sólo documento HTML y este combina las reglas de presentación de archivos CSS y la lógica de archivos JavaScript para desplegar una página web adaptada al dispositivo del usuario.

Ya que una aplicación web está compuesta por decenas de vistas que comparten componentes como: barras de navegación, cabeceras y pie de páginas, Django incluye un micro-lenguaje de plantillas con funcionalidades de herencia e inclusión, estructuras de repetición y decisión. Esto hace que sea posible tener una taxonomía de plantillas, de manera que sólo es necesario escribir los elementos comunes a un conjunto de plantillas una vez y crear nuevas pantallas en sobre otras. Se le llama rendering al proceso de combinar los datos de la base de datos y la petición del usuario, junto con una plantilla predefinida en la aplicación para generar páginas web personalizadas.

Todas las plantillas heredan de una plantilla base, ésta incluye la declaración del archivo HTML, la cabecera y define bloques que pueden ser sobrescritos por las plantillas "hijas". Los bloques principales definidos en nuestro diseño son: \textbf{(1) Bloque de título} permite definir el título de la página, \textbf{(2) Bloque de navegación} permite un acceso rápido a los sitios accedidos previamente, \textbf{(3) Bloque de contenido} bloque principal con el contenido de la página, \textbf{(4) Bloque de JavaScript} bloque para incluir archivos y métodos JavaScript. La plantilla general hereda de la \textit{plantilla base} y esta a su vez incluye la información de la \textit{barra lateral} y el \textit{header} de la página.

A continuación se muestran las principales pantallas de la interfaz de usuario del servicio web:

\begin{itemize}
	\item \textbf{Pantalla del Dashboard (Inicio)}: Esta es la pantalla de inicio de un usuario registrado, en ella encontramos la información principal y las distintas opciones de navegación. Como eje central se encuentran los archivos y capetas de nuestro sistema raíz.
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.2]{img/pantallaInicio.png}
		\caption{Pantalla del Dashboard (Inicio).}
		\label{pantalla1}
	\end{figure}
	
	\item \textbf{Pantalla Observación de Carpeta}: En ella encontramos todos los archivos y carpetas que se encuentran dentro de nuestra carpeta, al igual observamos todas las opciones que podemos ejecutar dentro de ella.
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.2]{img/observacionCarpeta.png}
		\caption{Pantalla Observación de Carpeta.}
		\label{pantalla2}
	\end{figure}
	
	\item \textbf{Pantalla Observación de Archivo}: Observamos la información contenida en el archivo, poseemos un editor web para editarlo, al igual todas las opciones que podemos manejar sobre el mismo.
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.2]{img/observacionArchivo.png}
		\caption{Pantalla Observación de Archivo.}
		\label{pantalla3}
	\end{figure}
	
	\item \textbf{Pantalla Compilación y Ejecución}: Aquí podemos acceder a las opciones de compilación y ejecución de nuestro archivo, junto con los resultados obtenidos de esos procesos.
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.2]{img/compilacionEjecucion.png}
		\caption{Pantalla Compilación y Ejecución.}
		\label{pantalla4}
	\end{figure}
	
	\item \textbf{Pantalla Control de Usuarios}: Esta pantalla solo es accedida por usuarios administradores del sistema, en ella tenemos la visualización de usuarios y podemos acceder a las distintas opciones de creación y edición de usuarios.
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.2]{img/controlUsuarios.png}
		\caption{Pantalla Control de Usuarios.}
		\label{pantalla5}
	\end{figure}
\end{itemize}


\subsection{Diseño de URLs}

Ya que la aplicación web consiste en un conjunto grande de vistas, debemos diseñar URLs que apunten a cada una de ellas de forma ordenada y lógica. Para esto, se ha usado una convención en la que la unidad principal de operación como archivos, carpetas, usuarios anteceden a la operación real que se esta llamando; a continuación se muestran ejemplos de las reglas usadas para diseñar las URLs:

\begin{itemize}
	\item Operaciones básicas de acceso:
	\begin{itemize}
		\item \textbf{GET /admin/} accedemos al dashboard de un usuario administrador. Todas las rutas para acceso de un usuario administrador se definen con esta ruta inicial. Ejemplo "http://localhost:8000/admin/users", retorna la lista de usuarios registrados en el sistema.
		\item \textbf{GET /user/} accedemos al dashboard de un usuario registrado. Todas las rutas para acceso de un usuario registrado se definen con esta ruta inicial. Ejemplo "http://localhost:8000/user/" accede al dashboard del usuario.
		\item \textbf{POST /user/create\_file/} Ruta para la creación de un nuevo archivo.
		\item \textbf{POST /user/create\_folder/} Ruta para la creación de una nueva carpeta.
		\item \textbf{GET /user/file/-id-} acceder a la información del archivo cuyo id dentro del sistema es -id-. Ejemplo "http://localhost:8000/user/file/2/", accedemos a la información del archivo cuyo id dentro del sistema es 2.
		\item \textbf{GET /user/folder/-id-} acceder a la información de una carpeta cuyo id dentro del sistema es -id-. Ejemplo "http://localhost:8000/user/folder/15/", accedemos a la carpeta cuyo id en el sistema es 15, y pertenece a el usuario.
		\item \textbf{GET /user/compile/-id-} compila el archivo cuyo id es -id- y retorna la información de compilación. Ejemplo "GET /user/compile/file/2/ HTTP/1.1" 200 12, compilamos el archivo cuyo id es 2, mediante una petición Ajax.
		\item \textbf{GET /user/execute/-id-} ejecuta la simulación definida en el archivo cuyo id es -id- y retorna el resultado de dicha simulación. Ejemplo "GET /user/execute/file/2/?arguments= HTTP/1.1" 200 634, ejecutamos el modelo de simulación, mediante una petición Ajax.
	\end{itemize}

\end{itemize}

\section{Administrador de Archivos} \label{administracionArchivos}

Un administrador de archivos, gestor de archivos o explorador de archivos es un programa que otorga al usuario la capacidad de trabajar, gestionar o administrar archivos y carpetas. Esto lo realiza mediante una interfaz de usuario que entre muchas operaciones permiten al usuario abrir, crear, editar, reproducir, ya sean archivos o carpetas. En el sistema de simulación web GALATEA se desarrolló un administrador de archivos web que permite  crear, editar, visualizar proyectos de simulación entre algunas otras opciones. Los administradores de archivos basados en la web son típicamente scripts escritos en cualquiera de los lenguajes para desarrollo web como PHP, Ajax, Perl, JSP u otro lenguaje de servidor. 

Como todo administrador de archivos existente, éste debe trabajar bajo un sistema de archivos el cual dependerá del sistema operativo en el que se encuentre instalado. Sus principales funciones son la asignación de espacio a los archivos, la administración del espacio libre y del acceso a los datos resguardados. Estructuran la información guardada en un dispositivo de almacenamiento de datos o unidad de almacenamiento (normalmente un disco duro de una computadora), que luego será representada ya sea textual o gráficamente utilizando un gestor de archivos.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/estructuraArchivosCarpetas.png}
	\caption{Estructura del Administrador de Archivos y Carpetas.}
	\label{estructuraAdministradorArchivosCarpetas}
\end{figure}

El framework de desarrollo web Django usado para desarrollar este proyecto nos permite tener una interacción directa con los archivos y carpetas. Esto debido a el lenguaje principal es que se encuentra escrito (Python), el cual es un lenguaje de programación potente y versátil para desarrollar cualquier tipo de tareas. Por ende, nuestro administrador de archivos y carpetas esta escrito en python, haciendo uso de las librerías de control archivos y carpetas que el lenguaje nos proporciona.

En la figura \ref{estructuraAdministradorArchivosCarpetas} podemos observar la estructura y diseño de nuestro administrador de archivos, como capa base tenemos a python y sus librerías de manejo de archivos, el cual interactua con el sistema de archivos de nuestro sistema operativo y ejecuta las operaciones a nivel físico en nuestra maquina o servidor. Como interfaz de usuario tenemos a Django, al ser un framework web nos permite una interacción simple y elegante con el usuario para controlar nuestros archivos y carpetas. En el punto central se encuentra nuestro código en python que sirve como una APIs de interconexión entre nuestra interfaz de usuario y el sistema manejador de archivo.

Una configuración de nuestro sistema es la integración de permisologías a los archivos y carpetas, lo cual nos permite compartirlos entre los distintos usuarios del sistema. Esto lo logramos mediante la definición de un conjunto de permisologías como lo observamos en la tabla \ref{permisoArchivosCarpetas}. Estas configuraciones de permisos están agregados a los modelos en la base de datos, controlados y configurados por el usuario mediante la interfaz de usuario.

\begin{table}[H]
	\centering
	
	{\fontsize{10pt}{\baselineskip}\selectfont
		\begin{tabular}[t]{|l|c|}
			\hline
			Permiso & Definición \\\hline
			\textit{Private (0) } & Solo el dueño puede acceder a él \\\hline
			\textit{Show (1) } & Otros usuarios pueden acceder al él solo para lectura \\\hline
			\textit{Edit (2) } & Otros usuarios pueden acceder al él para lectura y escritura  \\\hline
			\textit{Public (3) } & Otros usuarios pueden acceder al él y tienen control total  \\\hline
		\end{tabular}
	}
	
	\caption {Permisología de Archivos y Carpetas.} \label{permisoArchivosCarpetas}
\end{table}

\subsection{Control de Archivos}

El administrador de archivos tiene como modelos de datos principales para el manejo de archivos a File, LogsFile y DiskSpace, los cuales fueron explicados en la sección \ref{BaseDatos}. Para el manejo de archivos se han desarrollado cinco métodos principales los cuales son: 

\begin{itemize}
	\item Create File: el cual nos permite crear un archivo en una carpeta determinada.
	\item Show File: nos permite acceder a los datos dentro del archivo para ser visualizados por el usuario.
	\item Edit File: edita la información que se encuentra en el archivo.
	\item Move File: permite mover el archivo desde su carpeta origen a una nueva carpeta destino.
	\item Delete File: elimina el archivo de nuestro sistema.
\end{itemize}

Todos los archivos desde su creación tienen su dueño y permisología asociada. El manejo de archivos dentro del sistema tiene las funcionalidades necesarias para permitir una gran variedad de acciones a realizar.

\subsection{Control de Carpetas}

El control de carpetas es uno de los puntos mas importantes dentro de nuestro administrador de archivos, debido a que todos los archivos están relacionados con una carpeta y las carpetas en sí tienen una relación jerárquica entre ellas. En la figura \ref{jerarquiaCarpetas} observamos esa relación jerárquica en nuestro manejo de carpetas. 

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/jerarquiaCarpetas.png}
	\caption{Jerarquía de Carpetas.}
	\label{jerarquiaCarpetas}
\end{figure}

Cómo raíz de nuestro sistema de carpetas tenemos a la carpeta \textit{media}, la cual es el punto de partida para todo nuestro manejo de archivos y carpetas. En el segundo nivel de jerarquía tenemos las carpetas de \textit{usuari@s}, las cuales funcionan como punto de raíz para su sistema interno de archivos y carpetas. El nombre que identifica a cada carpeta de \textit{usuari@s} es propiamente dicho el "username" que identifica como único a cada usuario dentro del sistema.

Para el correcto manejo de carpetas se definieron una serie de métodos:

\begin{itemize}
	\item Create Folder: el cual nos permite crear una carpeta bajo cierta jerarquía.
	\item Show Folder: nos permite acceder a los archivos y carpetas internos.
	\item Edit Folder: editar la información básica de la carpeta.
	\item Move Folder: esta es una función delicada, debido a los archivos y carpetas internos, para ello se definió el método de manera recursiva y así modificar todo sin problemas.
	\item Delete Folder: elimina toda la información de la carpeta junto con sus archivos y carpetas internos.
\end{itemize}

Debido a que el espacio en disco físico es lilimitado, cada usuario tiene una porción de espacio asociado para su manejo de archivos y carpetas. Este espacio es constantemente monitoreado por el administrador de archivos y es una de las restricciones principales para el correcto funcionamiento del servicio. Esta porción de espacio en disco es fácilmente administrable por el usuario administrador de nuestro sistema web.

\subsection{Control de Permisos}

Mediante el sistema web de simulación GALATEA se busca que los usuarios tengan interacción entre ellos y puedan trabajar en conjunto, para así fortalecer y mejorar sus proyectos de simulación. Para ellos se implementó un sistema de permisos de acceso y modificación tanto para los archivos como carpetas dentro del sistema.

Cómo lo muestra la tabla \ref{permisoArchivosCarpetas} existen cuatro permisos bien definidos, pero debemos recalcar que estos permisos se enfocan en dos tipos de usuarios propiamente dichos:

\begin{itemize}
	\item Usuarios Amigos: estos son como su nombre lo indica \textit{amigos} en el sistema (conocidos). El privilegio principal de tener el \textit{status amigo}, es que permite compartir archivos y carpetas entre ellos.
	\item Usuarios NO Amigos: son usuarios que no poseen relación en el sistema.
\end{itemize}

Esto nos permite definir ambas permisologías para cada tipo de usuario. Para los usuarios \textit{NO Amigos}, mantenemos el mismo tipo de permisos y depende del usuario dueño cambiar o no los permisos de sus archivos para darle acceso a este tipo de usuarios. Un \textit{usuario amigo} tiene una relación directa con el usuario dueño, lo cual nos permite compartir nuestros archivos con ellos; este compartir se define en el modelo de datos \textit{ShareFile}, el cual contiene la permisología con la que definimos el acceso que el \textit{usuario amigo} puede tener sobre el archivo. El sistema permite que el usuario dueño en cualquier momento pueda cambiar la permisología que poseen cada uno de sus archivos y carpetas tanto para los \textit{usuarios amigos}, como los \textit{usuarios no amigos}.

\
\

El sistema de simulación web cuenta con una gama de funcionalidades para el control de usuarios, como: Registro de usuarios, Activación y desactivación de usuarios, Edición y eliminación de usuarios, Control de espacio en disco asignado para cada usuario, así mismo los usuarios pueden ingresar al sistema libremente y realizar las funciones que su rol dentro del sistema les permite. El control del modelo de simulación esta fuertemente relacionado con el manejo de archivos y carpetas dentro del sistema, debido a que se le permite al usuario agregar, modificar y eliminar modelos de simulación. Para ello es necesario un sistema administrador de archivos y carpetas, que junto a las permisologías asociadas, permita un optimo manejo. Al igual se cuenta con una interfaz de usuario amigable y portable para ejecutar esa tareas de administración. Siendo los elementos explicados en este capítulo la aplicación Web que funciona como coordinador del sistema, control de usuarios y roles y la Administración de archivos que permite llevar el control de acceso, creación y modificación de los archivos y carpetas. En el capítulo \ref{integracionGALATEA} se definirá a detalle la integración con GALATEA.




\chapter{Integración de GALATEA} \label{integracionGALATEA}

Debido a que GALATEA esta desarrollado en Java y nuestro sistema web esta escrito en Python, necesitamos un mecanismo de comunicación para ambos lenguajes. Para esto se desarrolló dos mecanismos de comunicación como lo son: (1) Subrocesos y (2) Sockets. El primero de ellos lo implementamos realizando invocación a un subproceso
o proceso externo, enviándole los parámetros necesarios para su ejecución, este enfoque es el actualmente implementado en nuestro sistema web y esta bien especificado en la sección \ref{llamadaProcesos}. La segunda implementación es una comunicación entre procesos vía sockets, el cual atiende las peticiones en un puerto de comunicación especifico, lo cual nos permite comunicar nuestro sistema Python con el motor de simulación escrito en Java, como se especifica en la sección \ref{sockets}. 

\section{Subprocesos} \label{llamadaProcesos}

El módulo de subproceso en Python  permite ejecutar nuevos procesos, tomando en cuenta las operaciones de entrada/salida/error y así obtener la información de retorno. Lo utilizan para ejecutar un comando shell o un archivo ejecutable en Python, \citep{subproccess}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/estructuraSubproceso.png}
	\caption{Ejecución de un Subproceso.}
	\label{subprocesoWork}
\end{figure}

El proceso de GALATEA para ejecutar simular definido en tres pasos:

\begin{itemize}
	\item Traducir el lenguaje GALATEA: este primer paso consiste en traducir el modelo escrito en lenguaje GALATEA, a lenguaje Java y Prolog.
	\item Compilar el modelo: en este paso compilamos el código Java de la simulación (Java a bytecode).
	\item Ejecutar la simulación: Finalmente ejecutamos la simulación con sus diferentes parámetros de entrada. Es decir, activamos el modelo de simulación con ciertos parámetros.
\end{itemize}

Cada uno de estos pasos es ejecutado mediante una llamada a un subproceso dentro de nuestro sistema. El resultado de cada una de los pasos es obtenido como valor de retorno de la misma y es mostrado al usuario.

\section{Sockets} \label{sockets}

Socket designa un concepto abstracto por el cual dos programas (posiblemente situados en computadoras distintas) pueden intercambiar cualquier flujo de datos, generalmente de manera fiable y ordenada \citep{ibmSockets}. Los sockets de Internet constituyen el mecanismo para la entrega de paquetes de datos provenientes de la tarjeta de red a los procesos o hilos apropiados. Un socket queda definido por un par de direcciones IP local y remota, un protocolo de transporte y un par de números de puerto local y remoto \citep{sockets}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.8]{img/socketWork.png}
	\caption{Típico flujo usando sockets.}
	\label{socketWork}
\end{figure}

Para que dos programas puedan comunicarse entre sí es necesario que se cumplan ciertos requisitos: Primero que un programa sea capaz de localizar al otro y segundo que ambos programas sean capaces de intercambiarse cualquier dato relevante entre ellos. Para ello son necesarios los dos recursos que originan el concepto de socket: un par de direcciones del protocolo de red (dirección IP, si se utiliza el protocolo TCP/IP), que identifican la computadora de origen y la remota, y un par de números de puerto, que identifican a un programa dentro de cada computadora \citep{sockets}. Los sockets permiten implementar una arquitectura cliente-servidor. La comunicación debe ser iniciada por uno de los programas que se denomina programa "cliente". El segundo programa espera a que otro inicie la comunicación, por este motivo se denomina programa "servidor" \citep{ibmSockets}.

La implementación de la integración con GALATEA mediante sockets como se observa en la figura \ref{estructuraSokets}, consiste en lo siguiente:

\begin{itemize}
	\item \textbf{El programa cliente}: es un programa generado y ejecutado por nuestro sistema web, este programa está escrito en Python.
	\item \textbf{El programa servidor}: este programa está escrito en Java para su completa integración con GALATEA, es iniciado desde nuestro sistema web y se crea una comunicación con nuestro programa cliente.
	\item \textbf{Protocolo de comunicación}: este es el corazón de nuestra integración mediante este método. Es importante poder definir un protocolo de comunicación entre nuestro programa cliente y servidor, debido que GALATEA permite diferentes opciones de simulación y controles. Este protocolo de comunicación debe definir todas las posibles a acciones a realizar para la simulación como: Iniciar, pausar, terminar, datos de entrada, datos de salida, entre muchos otros.
\end{itemize}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/estructuraSockets.png}
	\caption{Estructura Integración mediante Sockets.}
	\label{estructuraSokets}
\end{figure}

Toda nuestra implementación de sockets se hizo utilizando el protocolo de comunicación TCP. Con el uso de protocolo TCP, las aplicaciones pueden comunicarse en forma segura (gracias al de acuse de recibo -ACK- del protocolo TCP) independientemente de las capas inferiores. Esto significa que los routers  sólo tiene que enviar los datos en forma de datagrama, sin preocuparse con el monitoreo de datos porque esta función la cumple la capa de transporte \citep{sockets}.

\subsection{Programa Cliente}

El programa cliente está escrito en Python y es llamado por nuestra aplicación web. Su principal función es servir de mecanismo de comunicación entre el proceso de simulación y el usuario. Este programa permite recibir las distintas peticiones del usuario, identificarlas y comunicárselas al proceso de simulación, al igual recibir la comunicación del programa servidor (la simulación) y comunicárselas al usuario. Hay que notar que pueden desarrollarse muchas variantes del programa cliente, pero para uso de este trabajo se desarrolló un cliente que mantuviera una comunicación simple con el programa servidor.

\subsection{Programa Servidor}

El programa servidor está escrito en Java y es ejecutado por nuestra aplicación web. Justo con su ejecución el programa define un puerto de comunicación especifico, que a su vez permite al programa cliente la comunicación. Su función principal es recibir las distintas peticiones del programa cliente, transmitirlas al proceso de simulación y devolver los resultados al programa cliente. Este proceso debe llevar control integral de la simulación, así como atender las posibles eventualidades que puedan ocurrir durante la simulación. Este programa mantiene comunicación continua con GALATEA, ya que encapsula en su interior a GALATEA y al modelo que está siendo ejecutado.

\subsection{Protocolo de Comunicación}

La comunicación es la herramienta mas importante de esta implementación, por ende definir un buen protocolo que permita controlar las distintas opciones y acciones a ser ejecutadas en nuestra simulación nos garantiza una buena integración.

Como primera aproximación funcional, hemos definido un protocolo de control del simulador a partir de las funcionalidades que ofrece la plataforma Java para el control de subprocesos (o hebras, como son llamadas en esa plataforma). Esto permitirá que, sin importar cuál sea la solución, subproceso o sockets, del lado del simulador se tenga acceso a toda la funcionalidad de la plataforma base del simulador (máquina virtual Java, JVM, en este caso y, eventualmente la máquina Prolog, que actualmente es controlada desde la JVM).

A estas funcionalidades de control de hebras se agregarían, en casos particulares, otras funcionalidades especificas, como las que son necesarias para el control interactivo de una animación a partir de una simulación. Otros clientes seran necesarios en esos casos, desde luego.

El API Java para el manejo de Hebras (Threads) \citep{javaThreads}, define un conjunto de métodos para el control de hebras que han venido evolucionando a lo largo de los años y que se combina con los métodos de sincronización y comunicación entre procesos Java. Métodos como stop(), suspend() y resume() han sido retirados \citep{javaDeprecation} al ser considerados inherentemente inseguros a bajo nivel. Basándonos en esa experiencia y que este protocolo opera a un nivel superior con menor riesgo de seguridad, hemos propuesto los siguientes comandos de control de la simulación:

\begin{itemize}
	\item start: inicia la simulación(el simulador debe estar en estado de espera).
	\item sleep(ms): suspende la simulación (por una cantidad de ms).
	\item stop: detiene definitivamente la simulación (si el simulador esta programado para detección temprana dela orden esto puede ocurrir en cualquier momento).
	\item yield: le indica al procesador que debe bajar su prioridad de uso de procesador (corresponde al yield() en Java).
	\item pause: suspende la ejecución del simulador temporalmente. El simulador queda a la espera de otras órdenes que no impliquen terminar la simulación.
	\item set var = value: es un comando para cambiar el valor de parámetro de simulación llamado \textit{var} asignándole el valor \textit{value} que será usado cuando la simulación se reinicie.
	\item get var: es un comando para recuperar el valor del parámetro \textit{var} que será impreso por la misma vía de comunicación y leído por el cliente como una línea de texto.
\end{itemize}

\chapter{Pruebas}

Ya que la aplicación web está pensada en atender a una cantidad arbitraria de usuarios, deseamos conocer el número máximo de usuarios concurrentes a los que se le puede dar servicio con el hardware disponible. Llevamos a cabo pruebas de carga en las cuales se simulará una ráfaga  de peticiones variables para determinar la cantidad de peticiones concurrentes que el servidor puede manejar antes de que ocurra una degradación del servicio o el servidor sea incapaz de responder mas peticiones.

Consideramos que ocurre una degradación del servicio cuando el tiempo de espera del usuario aumenta mas allá de un umbral máximo, según \citep{nielsen}, existen tres umbrales importantes a la hora de evaluar el tiempo de respuesta de una aplicación:

\begin{itemize}
	\item \textbf{0.1 segundo}: Límite en el cual un usuario siente que está manipulando los objetos desde la interfaz de usuario.
	\item \textbf{1 segundo}: Límite en el cual un usuario siente que está navegando libremente.
	\item \textbf{10 segundos}: Límite en el cual se pierde la atención del usuario, es buena idea proveer barras de cargas y medios para cancelar la operación cuando se trata de operaciones de larga duración.
\end{itemize}

Para las siguientes pruebas consideramos las siguientes métricas de rendimiento de la aplicación web:

\begin{itemize}
	\item Tiempo de respuesta promedio.
	\item Tiempo de respuesta mediana.
	\item Tiempo de respuesta mínimo.
	\item Tiempo de respuesta máximo.
	\item Porcentaje de error.
	\item Rendimiento en términos de peticiones por segundo durante la duración de la prueba.
	\item Rendimiento en términos de bytes por segundo durante la duración de la prueba.
\end{itemize}

Consideramos una prueba como exitosa cuando el porcentaje de error sea igual a 0 y el tiempo máximo de espera de una petición no supere los 10,000ms, tomando en cuenta los umbrales definidos por \citep{nielsen}. Se considerará óptima aquella prueba que además de cumplir con ser exitosa, tenga el mayor rendimiento en términos de peticiones por segundo (Req/s) entre todas las pruebas realizadas.

La herramienta elegida para ejecutar las pruebas fue \citep{jMeter}, esta herramienta permite simular casos de uso específicos de una aplicación web como ráfagas de peticiones que pueden ser configuradas para seguir cualquier patrón dado. En nuestro caso, Jmeter se usará para generar una ráfaga de peticiones con un intervalo constante entre cada petición durante un tiempo de un minuto. Jmeter provee un componente llamado \textit{Summary Report} que totaliza y promedia los resultados obtenidos de todas las peticiones enviadas, del que podemos extraer todas las métricas de interés.

\section{Metodología de las pruebas}

Para determinar la carga máxima que la aplicación web es capaz de soportar en términos de las peticiones por minuto, simularemos una ráfaga de peticiones en un intervalo de tiempo de un minuto, variando el numero de peticiones hasta obtener un valor óptimo, la metodología a seguir es la siguiente:

\begin{enumerate}
	\item Se comenzará ejecutando una primera prueba con un número prudencialmente bajo de peticiones durante 60 segundos, éste número debe preferiblemente ser múltiplo de dos.
	\item Se varía el número de peticiones enviadas en la ráfaga multiplicando por dos cada vez que una prueba es exitosa, así si la primera prueba se hace con 16 peticiones. la siguiente tendrá 32, 64, 128 y así sucesivamente.
	\item Tras la primera prueba fallida, se calculará el número de peticiones de la siguiente prueba (\textit{P{\tiny sig}}) como el punto medio entre la cantidad de peticiones de la prueba previa (\textit{P{\tiny prev}}) y la prueba actual (\textit{P{\tiny act}}).
	\begin{equation}
		P_{sig} = \begin{cases}P_{prev} + |P_{act} - P_{prev}|/2\\P_{prev} - |P_{act} - P_{prev}|/2\end{cases}
	\end{equation}
	
	\item El paso 3 se repite hasta no se obtenga mayor precisión con pruebas sucesivas.
\end{enumerate}

\section{Condiciones de las pruebas}

Todas las pruebas se ejecutaron sobre una red local entre dos máquinas conectadas en un mismo enrutador: una de ellas ejecuta el servidor web, y la otra ejecuta las pruebas simulando las peticiones y totalizando los resultados observados; la latencia de la red se considera menor a 5ms. Las características del servidor web se pueden observar en la tabla \ref{servidorWeb}:

\begin{table}[H]
	\centering
	
	{\fontsize{10pt}{\baselineskip}\selectfont
		\begin{tabular}[t]{|c|c|c|}
			\hline
			Procesador & Memoria & Sistema Operativo \\\hline
			Intel Pentium 4 CPU @3.10GHz & 1 GB RAM & Debian 8  \\\hline
		\end{tabular}
	}
	
	\caption {Especificaciones del servidor web.} \label{servidorWeb}
\end{table}

\section{Resultados obtenidos}

\begin{enumerate}
	\item \textbf{Archivos estáticos con Apache}: Definir.
	\item \textbf{Páginas dinámicas con Django sobre Apache}: Definir.	
	\item \textbf{Páginas dinámicas con Django y archivos estáticos sobre el mismo servidor Apache}: Definir.
\end{enumerate}

\section{Análisis de los resultados}

Definir

\chapter{Conclusiones}

Durante el desarrollo de este trabajo, se construyó un sistema web de simulación cuya base principal es GALATEA. Al igual se implementó un sistema de administración de archivos y carpetas, el cual facilita al usuario el manejo de las simulaciones. La interacción de usuarios dentro del sistema es un elemento importante, por lo que se permitió a los usuarios compartir proyectos de simulación (archivos y carpetas), lo cual permite a varios usuarios colaborar entre sí para desarrollar mejores simulaciones  y validar simulaciones ya realizadas. Se integraron las nuevas tecnologías y herramientas de software como lo son: nuevos lenguajes de programación adaptados a la web usando Python mediante su framework web Django; herramientas para el control de tareas como Trello\footnote{Trello https://trello.com/}; repositorios para almacenar los proyectos como Github\footnote{Github https://github.com/} y manejadores de control de versiones como Git\footnote{Git https://git-scm.com/} que junto con su integración con Github se convierte en una herramienta de desarrollo muy poderosa para cualquier proyecto de software; al igual el manejo y control de servidores web como Nginx\footnote{Nginx https://www.nginx.com/} y Apache\footnote{Apache https://www.apache.org/}, siempre sin olvidar el manejo de Base de datos MySql\footnote{MySQL https://www.mysql.com/} y Postgresql\footnote{Postgresql https://www.postgresql.org/}.

El objetivo principal de este proyecto era desarrollar una integración entre GALATEA como software de simulación y el sistema web. Se desarrollaron y presentaron dos enfoques de integración que permitieron al sistema web comunicarse con el motor de simulación GALATEA, simular y mostrar los resultados al usuario. Se planteó el desarrollo de una plataforma web para que, los usuarios y usuarias del Centro de Simulación y Modelado (CESIMO) pudieran ejecutar los modelos de simulación en el simulador GALATEA de manera fácil y rápida, sin tener que pasar dificultades al momento de configurar y activar todas sus funcionalidades de simulador y así enfocarse únicamente en sus modelos de simulación y en los resultados obtenidos de los mismos.

El código completo de sistema web de simulación se encuentra en el siguiente repositorio publico de Github https://github.com/velasquezerik/django-roles-test. Al igual se utilizó este repositorio https://github.com/velasquezerik/tesis-doc, para almacenar todo éste documento. Para permitir que la comunidad de usuarios y usuarias aporten y desarrollen nuevas mejoras en el sistema web, se optó por utilizar la licencia de software GNU AFFERO GENERAL PUBLIC LICENSE\footnote{Affero https://www.gnu.org/licenses/agpl-3.0.en.html}. La Licencia Pública General Affero esta basada en la GPL de GNU, pero contiene una cláusula adicional que permite a los usuarios interactuar con el programa licenciado a través de una red para recibir el código fuente de ese programa. 

Se espera que con este trabajo el universo de usuarios y usuarias de simulación crezca, ya no solo a personas con conocimientos avanzados en el tema de simulación, conocimientos de programación y de sistemas operativos, sino a la comunidad en general. Permitiéndole a estudiantes de cursos iniciales, y estudiantes de otras universidades, al igual cualquier persona que quiera colaborar el los procesos y modelos de simulación, trabajar, analizar y compartir los resultados obtenidos desde cualquier parte del mundo.

Los logros mas importantes desde el punto de vista computacional se nombran a continuación:

\begin{itemize}
	\item Se desarrolló una aplicación web que permite el control de usuarios y usuarias, que pueden desde cualquier parte del mundo con una conexión a internet, ingresar en el sistema y desarrollar sus modelos de simulación.
	\item Se creó un sistema administrador de archivos y carpetas, al igual la correcta administración de espacio en disco que puede utilizar cada usuario y usuaria.
	\item Se implementó un sistema de permisos para cada archivo y carpeta, lo que permite a los usuarios colaborar entre ellos en diferente proyectos y modelos de simulación.
	\item Se integró el simulador de eventos discretos GALATEA a la aplicación web, lo cual se hizo mediante dos enfoques: Subprocesos y Sockets, dejando abierta la posibilidad a otros desarrollos específicos en el futuro.
\end{itemize}

Además del diseño y desarrollo del sistema, también se ejecutaron pruebas para determinar el rendimiento, estabilidad y escalabilidad de la aplicación web así como las funcionalidades básicas de los modelos de simulación existentes en GALATEA.


\section{Recomendaciones}

El presente proyecto permite un universo de opciones que se pueden continuar desarrollando, pero a continuación presentaré los trabajos más importantes a mi parecer que pueden desarrollarse como una continuación a este trabajo:

\begin{itemize}
	\item Integrar un sistema de educación a distancia para simulación.
	\item Desarrollar nuevas mejoras en la api de integración de GALATEA para no solo garantizar una comunicación con el sistema web, sino con otros sistemas.
	\item Mejorar el sistema de comunicación de usuarios dentro del sistema para de alguna manera desarrollar una red social de simulación.
	\item Definir e implementar un sistema de control de eventos en tiempo real para GALATEA, lo cual permita al usuario interactuar y obtener los resultados en tiempo real con el proceso de simulación.
\end{itemize}

La colaboración de una comunidad de desarrolladores siempre ayuda a depurar y mejorar el software, por lo que se invita a la comunidad ULA a continuar el desarrollo de éste proyecto. Es un proyecto libre que puede ayudar no solo a la comunidad universitaria en general, sino a la comunidad educativa, científica y social de nuestro territorio.

% Estilo de la bibliografía
\bibliographystyle{apa}

% ***************************************************************** %
% Para agregar toda la bibliografia del archivo .bib
% solo descomente el siguiente comando
% ***************************************************************** %
%\nocite{*}
% ***************************************************************** %

% Nombre del archivo con extensión .bib en donde se almacena la bibliografía
\bibliography{bibliografia}

\appendix

\chapter{Historias de usuario de la aplicación web}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{Historia} & Control de Usuarios en el sistema \\
		\hline \hline
		\textbf{Id} & UH-001 \\
		\hline
		\textbf{Descripción} & Los usuarios y usuarias del sistema web de simulación deben hacer correcto uso del mismo, por lo que se les debe permitir ingresar al sistema con sus credenciales, salirse del sistema, al igual editar su perfil con los datos de su preferencia (Imagen, contraseña, entre otros). Solo el administrador del sistema tiene la permisología para crear usuarios, editar la información de manejo de espacio de archivos y permitirles el acceso. \\
		\hline
		\textbf{Cómo probarlo} & El administrador del sistema crea un usuario o usuaria, le envía un correo con la notificación. EL usuario visita el sistema, ingresa sus datos y accede al mismo. EL usuario o usuaria modifica la información de su perfil y se observan los cambios de manera permanente en el sistema. El administrador modifica el espacio asignado en disco para un usuario o usuaria en particular, ese usuario o usuaria llena su espacio con información y una vez esto ocurra se observa que no pueda agregar mas archivos en su cuenta. \\
		\hline
	\end{tabular}
	\caption{Historia de Usuario - Control de Usuarios en el sistema.}
	\label{husuario:001}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{Historia} & Control de Archivos y carpetas en el sistema \\
		\hline \hline
		\textbf{Id} & UH-002 \\
		\hline
		\textbf{Descripción} & Los usuarios y usuarias del sistema web de simulación deben controlar los archivos y carpetas que se encuentren dentro del sistema, para desarrollar un mejor modelo de simulación. Para ello, el sistema debe permitir la creación, modificación y eliminación de archivos y carpetas en la sesión de cada usuario o usuaria. Los archivos y carpetas deben ser compartidos entre los usuarios y usuarias. \\
		\hline
		\textbf{Cómo probarlo} & El usuario o usuario crea, modifica y elimina archivos y carpetas usando el sistema de simulación web, el administrador del sistema verifica la creación dentro del sistema web y verifica su correcta creación, modificación o eliminación dentro del sistema de almacenamiento usado por el servidor donde se encuentra funcionando el sistema. \\
		\hline
	\end{tabular}
	\caption{Historia de Usuario - Control de Archivos y carpetas en el sistema.}
	\label{husuario:002}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{Historia} & Integración con GALATEA \\
		\hline \hline
		\textbf{Id} & UH-003 \\
		\hline
		\textbf{Descripción} & Los usuarios y usuarias del sistema web de simulación deben poder ejecutar los modelos de simulación mediante el sistema web. La ejecución de la simulación debe permitir definir los parámetros iniciales, mostrar las opciones de ayuda, al igual permitirle al usuario o usuaria la visualización de la salida luego de que el modelo de simulación finalice su ejecución. \\
		\hline
		\textbf{Cómo probarlo} & Ejecutar un modelo de prueba existente en GALATEA (Por ejemplo SimpleTeller), tanto en el sistema web de simulación, como en la ejecución normal de GALATEA. Variar los parámetros de entrada de la simulación y comparar ambas salidas para verificar que sean iguales. \\
		\hline
	\end{tabular}
	\caption{Historia de Usuario - Integración con GALATEA.}
	\label{husuario:003}
\end{table}

\chapter{Casos de uso de la aplicación web}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{U-01} & \textbf{Login de Usuario} \\
		\hline \hline
		\textbf{Precondición} & Usuario no autentificado y usuario registrado \\
		\hline
		\textbf{Descripción} & Usuario no autentificado se autentifica en el sistema web. \\
		\hline
		\textbf{Secuencia Normal} & Usuario click en login. Ingresa sus credenciales. Dar click en el botón login. Usuario es autentificado por el sistema. \\
		\hline
		\textbf{Excepciones} & Usuario o contraseña incorrectos. \\
		\hline
		\textbf{Postcondición} & Inicia en su pantalla de inicio. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Login Usuario.}
	\label{tabla:casouso01}
\end{table}


\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{U-02} & \textbf{Logout de Usuario} \\
		\hline \hline
		\textbf{Precondición} & Usuario autentificado \\
		\hline
		\textbf{Descripción} & Usuario deja de estar autentificado en el sistema. \\
		\hline
		\textbf{Secuencia Normal} & Click en el botón logout. Sistema olvida la sesión del usuario. \\
		\hline
		\textbf{Excepciones} & Error en el control de sesiones. \\
		\hline
		\textbf{Postcondición} & Usuario no autentificado e inicio en pantalla de Login. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Logout de Usuario.}
	\label{tabla:casouso02}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{U-03} & \textbf{Control de Contraseña} \\
		\hline \hline
		\textbf{Precondición} & Usuario autenticado en el sistema. \\
		\hline
		\textbf{Descripción} & Usuario puede cambiar su contraseña. \\
		\hline
		\textbf{Secuencia Normal} & Click en cambiar contraseña. Ingresa la nueva contraseña y la repite. Click en botón actualizar. Sistema actualiza contraseña. \\
		\hline
		\textbf{Excepciones} & Contraseñas no coinciden. Campos vacíos. \\
		\hline
		\textbf{Postcondición} & Contraseña actualizada. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Control de Contraseña.}
	\label{tabla:casouso03}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{U-04} & \textbf{Manejo de Perfil} \\
		\hline \hline
		\textbf{Precondición} & Usuario autenticado. \\
		\hline
		\textbf{Descripción} & Cambiar la información básica del perfil de usuario. \\
		\hline
		\textbf{Secuencia Normal} & Click en perfil. Ingresar nuevos datos del perfil. Click en botón actualizar datos. Notificación de datos actualizados. \\
		\hline
		\textbf{Excepciones} & Campos vacíos. \\
		\hline
		\textbf{Postcondición} & Datos de perfil actualizados en el sistema. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Manejo de Perfil.}
	\label{tabla:casouso04}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{U-05} & \textbf{Manejo de Archivos} \\
		\hline \hline
		\textbf{Precondición} & Usuario autentificado. Espacio en disco libre. \\
		\hline
		\textbf{Descripción} & Se puede crear, editar, mover y eliminar archivos en el sistema. \\
		\hline
		\textbf{Secuencia Normal} & Click en crear Archivo. Se ingresa el nombre. Click Aceptar;Click en eliminar Archivo. Se acepta la notificación. Click Aceptar; Click en mover Archivo. Se ingresa el nombre de la carpeta destino. Click Aceptar; \\
		\hline
		\textbf{Excepciones} & Espacio en disco insuficiente. Nombres no válidos. \\
		\hline
		\textbf{Postcondición} & Archivo creado, editado, eliminado y movido con éxito. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Manejo de Archivos.}
	\label{tabla:casouso05}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{U-06} & \textbf{Manejo de Carpetas} \\
		\hline \hline
		\textbf{Precondición} & Usuario autentificado. Espacio en disco libre. \\
		\hline
		\textbf{Descripción} & Se puede crear, editar, mover y eliminar carpetas en el sistema. \\
		\hline
		\textbf{Secuencia Normal} & Click en crear Carpeta. Se ingresa el nombre. Click Aceptar;Click en eliminar Carpeta. Se acepta la notificación. Click Aceptar; Click en mover Archivo. Se ingresa el nombre de la carpeta destino. Click Aceptar; \\
		\hline
		\textbf{Excepciones} & Espacio en disco insuficiente. Nombres no válidos. \\
		\hline
		\textbf{Postcondición} & Carpeta creada, editada, eliminada y movida con éxito. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Manejo de Carpetas.}
	\label{tabla:casouso06}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{U-07} & \textbf{Control de Simulación} \\
		\hline \hline
		\textbf{Precondición} & Usuario autentificado. Archivo de simulación válido. \\
		\hline
		\textbf{Descripción} & Se compila y ejecuta un archivo de simulación. La información resultante se observa en el sistema. \\
		\hline
		\textbf{Secuencia Normal} & Se visualiza un archivo de simulación válido. Click en compilar. Archivo compilado. Se muestra resultado; Se visualiza un archivo de simulación válido. Click en ejecutar. Archivo compilado y ejecutado. Se muestra resultado de la simulación. \\
		\hline
		\textbf{Excepciones} & Archivo no válido. Error en compilación. Error en Archivo. \\
		\hline
		\textbf{Postcondición} & Resultado de la compilación y ejecución por pantalla. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Control de Simulación.}
	\label{tabla:casouso07}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{U-08} & \textbf{Control de Amigos} \\
		\hline \hline
		\textbf{Precondición} & Usuario autentificado. \\
		\hline
		\textbf{Descripción} & El usuario puede enviar solicitudes de amistad a otros usuario, al igual puede recibir notificaciones, aceptarlas o rechazarlas. \\
		\hline
		\textbf{Secuencia Normal} & Click obtener amigos. Selecciona un usuario de la lista. Enviar solicitud. Solicitud enviada; Click en notificaciones de amigos. Aceptar/Negar/Bloquear solicitud. \\
		\hline
		\textbf{Excepciones} & Solicitud ya enviada. Usuario bloqueado. \\
		\hline
		\textbf{Postcondición} & Estatus de amigo actualizado. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Control de Amigos.}
	\label{tabla:casouso08}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{U-09} & \textbf{Control de Archivos Compartidos} \\
		\hline \hline
		\textbf{Precondición} & Usuario autenticado. Al menos un amigo en el sistema. \\
		\hline
		\textbf{Descripción} & El usuario puede compartir archivos entre sus amigos. \\
		\hline
		\textbf{Secuencia Normal} & Pantalla de visualización de archivo. Click en compartir. Selecciona un amigo. Se enviá la notificación; Click en notificaciones de archivos. Click en aceptar/negar solicitud de archivo.  \\
		\hline
		\textbf{Excepciones} & No amigos asociados. \\
		\hline
		\textbf{Postcondición} & Estatus de archivo actualizado. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Control de Archivos Compartidos.}
	\label{tabla:casouso09}
\end{table}

\section{Usuario Administrador}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{A-01} & \textbf{Control de Usuarios} \\
		\hline \hline
		\textbf{Precondición} & Usuario Administrador autenticado. \\
		\hline
		\textbf{Descripción} & Permite registrar nuevos usuarios al sistema. \\
		\hline
		\textbf{Secuencia Normal} & Click en usuarios. Click registrar nuevo usuario o administrador. Ingresar datos del nuevo usuario. Click en guardar. \\
		\hline
		\textbf{Excepciones} & Datos repetidos en el sistema.  \\
		\hline
		\textbf{Postcondición} & Usuario registrado en el sistema. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Control de Usuarios.}
	\label{tabla:casouso010}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{A-02} & \textbf{Observación de Logs} \\
		\hline \hline
		\textbf{Precondición} & Usuario Administrador autenticado \\
		\hline
		\textbf{Descripción} & Observación de los logs de carpetas, archivos y usuarios del sistema. \\
		\hline
		\textbf{Secuencia Normal} & Click en logs. Muestra listado de logs del sistema. \\
		\hline
		\textbf{Excepciones} & No logs en el sistema \\
		\hline
		\textbf{Postcondición} & Lista de logs con descripción. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Observación de Logs.}
	\label{tabla:casouso011}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{A-03} & \textbf{Control de Espacios en Disco} \\
		\hline \hline
		\textbf{Precondición} & Usuario Administrador autenticado \\
		\hline
		\textbf{Descripción} & Permite editar el espacio en disco asociado al usuario. \\
		\hline
		\textbf{Secuencia Normal} & Pantalla de listado de usuarios. Click editar espacio. Modificar espacio. Click actualizar. \\
		\hline
		\textbf{Excepciones} & Espacio en disco insuficiente. \\
		\hline
		\textbf{Postcondición} & Modificación de la cantidad de espacio en disco asociado. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Control de Espacios en Disco.}
	\label{tabla:casouso012}
\end{table}


\chapter{Casos de uso de la integración con GALATEA}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{G-01} & \textbf{Traducir Archivos} \\
		\hline \hline
		\textbf{Precondición} & Archivo de simulación válido. \\
		\hline
		\textbf{Descripción} & Traduce un archivo de simulación en las distintas clases Java necesarias para su compilación y ejecución. \\
		\hline
		\textbf{Secuencia Normal} & Buscar el archivo de simulación. Ejecuta el comando de traducción. \\
		\hline
		\textbf{Excepciones} & Archivo de simulación no válido. Errores en la traducción. \\
		\hline
		\textbf{Postcondición} & Archivos Java necesarios creados. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Traducir Archivos.}
	\label{tabla:casouso013}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{G-02} & \textbf{Compilar Archivos} \\
		\hline \hline
		\textbf{Precondición} & Archivo de simulación válido. Traducción de simulación realizada. \\
		\hline
		\textbf{Descripción} & Compila las diferentes clases Java necesarias para crear sus .Class \\
		\hline
		\textbf{Secuencia Normal} & Buscar los archivos Java. Crea los .Class de cada archivo Java a ser ejecutado. \\
		\hline
		\textbf{Excepciones} & Errores en los archivos Java.  \\
		\hline
		\textbf{Postcondición} & Archivos .Class creados. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Compilar Archivos.}
	\label{tabla:casouso014}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{G-03} & \textbf{Ejecutar Archivos} \\
		\hline \hline
		\textbf{Precondición} & Archivo de simulación válido. Compilación de simulación realizada. \\
		\hline
		\textbf{Descripción} & Ejecuta el archivo de simulación en el ambiente de GALATEA y muestra su resultado. \\
		\hline
		\textbf{Secuencia Normal} & Busca el archivo .Class principal lo enlaza a GALATEA. Ejecuta el programa de simulación. \\
		\hline
		\textbf{Excepciones} & Errores de lógica de simulación \\
		\hline
		\textbf{Postcondición} & Simulación realizada. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Ejecutar Archivos.}
	\label{tabla:casouso015}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{Código} & \textbf{Mostrar Simulación} \\
		\hline \hline
		\textbf{Precondición} & Archivo de simulación válido. Ejecución de simulación realizada. \\
		\hline
		\textbf{Descripción} & Muestra por pantalla el resultado de la ejecución de la simulación. \\
		\hline
		\textbf{Secuencia Normal} & Ejecuta la simulación. Guarda resultados. Enviá resultados al sistema de visualización. \\
		\hline
		\textbf{Excepciones} & Errores en la simulación. \\
		\hline
		\textbf{Postcondición} & Resultados de la simulación visualizados. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Mostrar Simulación.}
	\label{tabla:casouso016}
\end{table}



\chapter{Casos de uso de administración de archivos}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{Código} & \textbf{Nombre} \\
		\hline \hline
		\textbf{Precondición} & Con diez cañones por banda, viento en popa, a toda vela, no corta el mar, sino vuela un velero bergantín... \\
		\hline
		\textbf{Descripción} & Con diez cañones por banda, viento en popa, a toda vela, no corta el mar, sino vuela un velero bergantín... \\
		\hline
		\textbf{Secuencia Normal} & Volverán las oscuras golondrinas, en tu balcón sus nidos a colgar, y otra vez con el ala, a sus cristales jugando llamarán... \\
		\hline
		\textbf{Excepciones} & Volverán las oscuras golondrinas, en tu balcón sus nidos a colgar, y otra vez con el ala, a sus cristales jugando llamarán... \\
		\hline
		\textbf{Postcondición} & Volverán las oscuras golondrinas, en tu balcón sus nidos a colgar, y otra vez con el ala, a sus cristales jugando llamarán... \\
		\hline
	\end{tabular}
	\caption{Caso de uso - NOMBRE.}
	\label{tabla:casouso0}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{C-01} & \textbf{Control de Archivos} \\
		\hline \hline
		\textbf{Precondición} & Espacio en disco suficiente. Permisología de escritura en disco. \\
		\hline
		\textbf{Descripción} & Permite crear, mover, eliminar y editar archivos en el disco. \\
		\hline
		\textbf{Secuencia Normal} & Verificar Archivo. Crear/Editar/Mover/Eliminar archivo en el disco. Respuesta de la operación. \\
		\hline
		\textbf{Excepciones} & Errores en el disco. \\
		\hline
		\textbf{Postcondición} & Archivo Creado/Editado/Eliminado. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Control de Archivos.}
	\label{tabla:casouso017}
\end{table}

\begin{table}[H]
	\centering
	\begin{tabular}{p{2.5cm} p{10cm}}
		\hline
		\textbf{C-02} & \textbf{Control de Carpetas} \\
		\hline \hline
		\textbf{Precondición} & Espacio en disco suficiente. Permisología de escritura en disco. \\
		\hline
		\textbf{Descripción} & Permite crear, mover, eliminar y editar carpetas en el disco. \\
		\hline
		\textbf{Secuencia Normal} & Verificar Carpeta. Crear/Editar/Mover/Eliminar carpeta en el disco. Respuesta de la operación. \\
		\hline
		\textbf{Excepciones} & Errores en el disco. \\
		\hline
		\textbf{Postcondición} & Carpeta Creado/Editado/Eliminado. \\
		\hline
	\end{tabular}
	\caption{Caso de uso - Control de Carpetas.}
	\label{tabla:casouso018}
\end{table}



% ***************************************************************** %
% FIN DE
% Cuerpo
% ***************************************************************** %

\end{document}
