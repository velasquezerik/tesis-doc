\documentclass[14pt,oneside]{book}
\usepackage{ulamonog} % formato para la propuesta o proyecto de grado
\usepackage[ansinew]{inputenc} % escribir acentos

%\usepackage[activeacute,spanish]{babel}
\usepackage{graphicx}
\usepackage{color}
\usepackage{float}
\usepackage{verbatim}
\usepackage[colorlinks,pdftex]{hyperref}

\usepackage{setspace}


\usepackage{setspace}
\usepackage{listings} %para código
\usepackage{amsmath} %para alinear ecuaciones
\usepackage{longtable} % para tablas largas
\usepackage{cite} % para contraer referencias
%\usepackage[dvips]{graphicx} % PDFLaTeX
%\DeclareGraphicsExtensions{.png,.pdf,.jpg}

\usepackage{pdfpages}

\setlength{\parindent}{12pt}

% si se va a imprimir,
% se incluye al final despues de citecolor=blue, el comando draft=true
% Las siguientes son propiedades del pdf, más no cambian nada dentro del
% texto de la monografía
\hypersetup{pdftitle={Diseño e implementación de un Sistema Web para el Simulador de Eventos Discretos GALATEA.},
pdfauthor={Br. Erik Velásquez},
pdfsubject={Proyecto de Grado}, % se deja igual (se cambia para el proyecto de grado)
pdfkeywords={Servicios Web, Sistemas Distribuidos, Web Semántica, Arquitectura Orientada a Servicios, Simulación.},
pdfstartview=FitH, bookmarks=true, citecolor=blue, draft=true}
\nolistoffigures

\usepackage{natbib}

\let\olditemize\itemize
\def\itemize{\olditemize\itemsep=0pt }

\sloppy

\begin{document}

\frontmatter


% ***************************************************************** %
% Portada y resumen
% ***************************************************************** %

% Si desea que el logo de la ULA aparezca en la parte superior,
% descomente la siguiente línea. Por defecto aparece en la parte inferior
\logoarriba{}

% Año en el cual se entrega el proyecto de grado o la propuesta
\copyrightyear{2016}
%\tipomonografia{Proyecto de Grado}


% Título de la monografía, el cual saldrá en la portada
\title{Diseño e implementación de un Sistema Web para el Simulador de Eventos Discretos GALATEA.}


% Autor de la monografía, el cual saldrá en la portada
 \author{Erik Velásquez}

% La fechaentrega, presentaciondia, presentacionlugar
% y mencionespecial, es para aquel caso en el cual se
% vaya a utilizar la hoja del veredicto en el formato
% que se presenta aquí. El primerjurado, segundojurado,
% y cedula, son campos que pueden llenarse, pero sólo
% aparecerán si se utiliza la página del veredicto

% Cédula del autor de la monografía
 \cedula{19.435.165}

% Tutor del Proyecto de Grado
 \tutor{Dr. Jacinto Dávila}

% Cualquiera de los instructores que aparecen a continuación
% pueden comentarse o descomentarse según sea el caso:

%%% Cotutor del Proyecto de Grado
\cotutor{Prof. Kay Tucci}
%%% Asesor del Proyecto de Grado
% \asesor{Dr. Asesor}
%%% Asesor Industrial del Proyecto de Grado
% \asesorindustrial{Dr. Asesor Industrial}
%%% Tutor Industrial del Proyecto de Grado
% \tutorindustrial{Dr. Tutor Industrial}
%%% Jurados del Proyecto de Grado
% \primerjurado{Dr. Primer Profesor}
 %\segundojurado{Prof. Segundo Profesor}


% NO TOCAR si es Ingenieria de Sistemas
% \grado{Ingeniero Químico} % por defecto Ingeniero de Sistemas

%\signaturepage ----- NO TOCAR

%%%%%OJO%%%%%Arreglen esto según su opción
% Si es control y automatizacion se comentan las siguientes líneas. Si es de
% Sistemas Computacionales comenta la tercera. De Investigación de Operaciones
% comenta la segunda
 \opcion{Sistemas Computacionales}
%\opcion{Investigación de Operaciones}


% Aquí se escribe el resumen de la monografía
\resumen{
Se buscó implementar y desplegar como servicio, una aplicación utilizada para modelar y simular eventos discretos en sistemas distribuidos, utilizando como medio los servicios web. El objetivo principal de este proyecto consistió en buscar, mediante el uso de un sistema web, una solución al problema existente entre los usuarios y usuarias del Centro de Simulación y Modelado (CESIMO) de la Universidad de los Andes, que suelen tener muchas dificultades para ejecutar los modelos de simulación en el simulador GALATEA, especialmente al momento de configurar y activar todas sus funcionalidades. Mediante el patrón de diseño de software modelo vista controlador (MVC) y usando el framework de desarrollo web Django; se desarrolló el sistema web, que usando como motor principal a GALATEA, permite crear,controlar y simular proyectos de simulación. Al igual se creó una implementación de gestión de archivos, la cual permite compartir y controlar archivos entre los distintos usuarios y usuarias del CESIMO.
}

% Aquí se escriben las palabras claves de la monografía
\descriptores{Servicios Web, Sistemas Distribuidos, Web Semántica, Arquitectura Orientada a Servicios, Simulación.}

% Esto es para que salga la cota en la hoja del resumen. Actualmente,
% 11-03-08, en la Escuela de Ingeniería de Sistemas no es necesario
% buscar la cota previamente, sino que el Proyecto de Grado se entrega
% en la Escuela sin cota.
%\cota{IXD A01.1}

% Si desea eliminar la frase "Este trabajo fue procesado en LATEX"
% del resumen, descomente la siguiente línea
 \sinlatex{}

% ***************************************************************** %
% FIN DE
% Portada y resumen
% ***************************************************************** %


% ***************************************************************** %
% Si tiene dedicatoria
% con o sin comentar
% ***************************************************************** %
\dedicatoria{Nadie.\\
Nadie.\\
Nadie.
}

% ***************************************************************** %
% FIN DE
% Si tiene dedicatoria
% ***************************************************************** %

\beforepreface

% ***************************************************************** %
% Agradecimientos y capítulos NO numerados
% ***************************************************************** %

\prefacesection{Agradecimientos}

Nadie.\\ \\
Nadie.\\ \\
Nadie.\\ \\
Nadie.\\ \\
Nadie.\\ \\
Nadie.\\ \\
Nadie.\\ \\
Nadie.

%%% Capitulo sin numero, antes de la pagina 1

%\prefacesection{Introducción}
% Este es un ejemplo de una sección no numerada.


% ***************************************************************** %
% FIN DE
% Agradecimientos y capítulos NO numerados
% ***************************************************************** %

\afterpreface

\pagestyle{fancyplain}
\renewcommand{\chaptermark}[1]{\markboth{#1}{\textsc{\footnotesize\thechapter\ #1}}}
\renewcommand{\sectionmark}[1]{\markright{\textsc{\footnotesize\thesection\ #1}}}
\lhead[\fancyplain{}{\textsc{\footnotesize\thepage}}]%
{\fancyplain{}{\rightmark}}
\rhead[\fancyplain{}{\leftmark}]%
{\fancyplain{}{\textsc{\footnotesize\thepage}}} \cfoot{}

\mainmatter

% ***************************************************************** %
% Cuerpo
% ***************************************************************** %
% De aquí en adelante se desarrollan los capítulos numerados de la monografía

% ***************************************************************** %
% INICIO DE estructura tentativa de la Propuesta
% ***************************************************************** %

\chapter{Introducción}

El siguiente extracto, introduce una descripción de cómo se ha desarrollado el servicio que prestará una aplicación basada en simulación de eventos discretos, que estará fundamentado en GALATEA \citep{Galatea} , el cual es un software para simulación de sistemas multi-agentes producto de dos líneas de investigación: lenguajes de simulación basados en la teoría de simulación de Zeigler y agentes basados en lógica.  El propósito es que sirva para proveer un servicio de simulación de eventos discretos al usuario desde cualquier punto. Así también, se pretende analizar conceptos de seguridad mediante el cual, ante una petición al computador (request), ésta sea procesada sólo si ha sido previamente validada.


\section{Antecedentes}

Como trabajos similares a esta propuesta se puede mencionar los realizado por \citep{Galatea} el cual relata la fase de desarrollo, cómo surge y hacia donde se proyecta GALATEA. Implementada como una plataforma libre de código abierto para simulación de sistemas multi-agente que incorpora estrategias de simulación bien conocidas con la que cualquier modelista o simulista puede ensayar dichas estrategias en problemas de simulación de sistemas complejos. Por otra parte, otro precedente tomado en cuenta ha sido \citep{tesisBruno}, el cual trata de una tesis de pre-grado que expone el desarrollo de un servicio web para la Modeloteca del Sistema Nacional de Simulación. La misma consistió en buscar, mediante el uso de una aplicación web, la solución al problema existente en el Centro de Simulación y Modelado (CESIMO) de la Universidad de Los Andes, en el cual había dificultades para mantener un registro referente a los proyectos que allí se desarrollaban, lo que como resultado provocaba que a menudo se perdiera información referente a los mismos, ó que incluso se llevara a cabo proyectos de forma innecesaria, ya que trabajos parecidos habrían sido realizado antes. Resultados que, debido a la falta de un repositorio institucional compartido, resultan imposibles de reusar o integrar. A partir de estos dos antecedentes lo que se pretende es, tomando como base GALATEA, adaptarlo como un servicio web en el cual el usuario pueda interactuar con el simulador, sin tener las limitaciones tales como las que pueden suelen surgir al usar sistemas operativos o navegadores diferentes, incluso ante arquitecturas distintas. A su vez, de \citep{tesisBruno}, se buscó obtener la experiencia ganada al desarrollar un Servicio Web en sí. Al igual se toma en cuenta a \citep{tesisGustavo}, buscando implementar y desplegar como servicio, una aplicación utilizada para modelar y simular eventos discretos en sistemas distribuidos, utilizando como medio los servicios web. A pesar de que ambas experiencias desarrollaron soluciones, aún no es posible contar con la experiencia de uso remoto de GALATEA como un servicio Web configurado por expertos administradores, pero con todas las facilidades y características del simulador al alcance de cualquier usuario registrado. El modelo vista controlador (MVC) es un patrón de diseño de software, que separa los datos y la lógica de una aplicación de la interfaz de usuario y el módulo encargado de gestionar los eventos y las comunicaciones. Para ello MVC propone la construcción de tres componentes distintos que son el modelo, la vista y el controlador, es decir, por un lado define componentes para la representación de la información, y por otro lado para la interacción del usuario. Este patrón de arquitectura de software se basa en las ideas de reutilización de código y la separación de conceptos, características que buscan facilitar la tarea de desarrollo de aplicaciones y su posterior mantenimiento. Este patrón de diseño es muy popular en el marco de aplicaciones web ya que su abstracción permite escribir software altamente desacoplado y fácil de mantener y escalar. Django es un framework de desarrollo web de código abierto, escrito en Python, que respeta el patrón de diseño conocido como Modelo–vista–controlador. La meta fundamental de Django es facilitar la creación de sitios web complejos. Django pone énfasis en el re-uso, la conectividad y extensibilidad de componentes, el desarrollo rápido y el principio No te repitas (DRY, Don't Repeat Yourself). Python es usado en todas las partes del framework, incluso en configuraciones, archivos, y en los modelos de datos. Django permite construir aplicaciones web rápidamente, gracias a su filosofía de baterías incluidas, es decir, que incluye una inmensa gama de características comunes a la mayoría de las aplicaciones web como las validaciones , autentificación de usuarios, manejo de sesiones entre muchos otros \citep{django}. En su proyecto de grado \citep{tesisJesus}, utilizando MVC y Django como herramientas fundamentales desarrolló un sistema de monitoreo distribuido de enlaces de redes a través de un servicio web centralizado. Este servicio además hace  énfasis en la visualización de los datos recolectados a partir de pruebas periódicas.

\section{Planteamiento del problema}

La preocupación por los sistemas distribuidos y de cómo diferentes máquinas podían comunicarse entre sí surgió en la década de los 90. Hasta ese momento, era suficiente con que las aplicaciones de un mismo ordenador pudieran establecer una comunicación. Los servicios Web son muy prácticos, pueden aportar gran independencia entre la aplicación que usa el servicio Web y el propio servicio. De esta forma, los cambios a lo largo del tiempo en uno no debe afectar al otro. En la medida que se ha avanzado en términos tecnológicos, se percibe un crecimiento proporcional de la información que se genera en todos los ámbitos, sea científico, humanístico, económico etc. Estos fenómenos no suceden como acontecimientos aislados, sino que son posibles gracias al conocimiento adquirido y al esfuerzo de muchos, de ponerlo a disposición de quien desee acceder a ellos. Teniendo en cuenta el acceso libre y continuo de la información, surge el planteamiento del problema, el cual tiene dos vertientes, la primera, consiste en que no se dispone de una plataforma web acondicionada para que, de manera fácil y rápida se pueda hacer uso del simulador GALATEA los usuarios y usuarias del Centro de Simulación y Modelado (CESIMO) de la Universidad de los Andes, suelen tener muchas dificultades para ejecutar los modelos de simulación en el simulador GALATEA, especialmente al momento de configurar y activar todas sus funcionalidades. Si bien se posee un servidor académico en CESIMO, es necesario desarrollar mecanismos que posibiliten el uso de las herramientas que éste ofrece, por ello la necesidad de servicios web que permitan que las funcionalidades que posee el simulador estén disponibles tanto a nivel local como a nivel externo (Sistema Distribuido). En cuanto al otro aspecto, consiste en verificar que la integridad de la información estén garantizados, en especial cuando el usuario desee enviar algún dato, o realizar alguna consulta, por lo cual el sistema debe validar a dicho usuario previamente.

\section{Justificación}

Dado que las organizaciones protegen sus redes mediante firewalls -que filtran y bloquean gran parte del tráfico de Internet-, cierran casi todos los puertos TCP salvo el 80, que es, precisamente, el que usan los navegadores. Los servicios Web utilizan este puerto, por la simple razón de que no resultan bloqueados. Es importante señalar que los servicios web se pueden utilizar sobre cualquier protocolo, sin embargo, TCP es el más común. La principal motivación para realizar este trabajo, es la de desarrollar un sistema web que sirva como base para la simulación de eventos discretos, esperando que un sistema web amplíe la base de usuarios y usuarias del simulador liberándolos del trabajo de configuración y permitiendo acceder a los modelos de simulación, al igual ponerlos en contacto con diferentes expertos que trabajan en el CESIMO y así validar sus modelos de simulación y compartir conocimientos.


\section{Alcance}

Se desea culminar en este proyecto el diseño de una arquitectura de software que permita desarrollar un sistema web para el uso de GALATEA. Se desarrollará un prototipo de esa arquitectura, implementando el sistema web para la ejecución de los modelos de simulación. El prototipo debe cubrir todo lo referente al modelado de los eventos discretos, para el funcionamiento adecuado del sistema. Adicionalmente, la arquitectura del mismo debe permitirles adaptarse al contexto del usuario, y reaccionar en base a la interacción del usuario con el sistema.

\section{Objetivos}


\subsection{Objetivo general}

Diseñar e implementar un sistema web para los usuarios y usuarias, modelistas y simulistas  del simulador de eventos discretos GALATEA, que les permita realizar todas las tareas habituales de modelado, codificación y análisis en sus computadores y en la forma que prefieran, pero permitiéndoles realizar las tareas automáticas de compilación, gestión de archivos, simulación y gestión de salidas, en el espacio virtual y con los recursos compartidos de un servidor Web. 


\subsection{Objetivos específicos}

\begin{enumerate}

\item Desarrollar un sistema web que permita el control de usuarios junto con los roles a ser utilizados en el sistema.
\item Diseñar e implementar una arquitectura de software que permita la comunicación entre el software de simulación y el sistema web.
\item Instalar y configurar en un servidor la arquitectura de software para el sistema de simulación.
\item Incorporar el simulador GALATEA como servicio para el sistema web.
\item Diseñar y desarrollar un cliente GUI/controlador para un modelo que se pueda gestionar archivos y simular con GALATEA a través del sistema web desarrollado.
\item Sistematizar la experiencia de uso del sistema web para simulación.
\item Analizar el sistema web desarrollado y establecer las conclusiones. 


\end{enumerate}


\section{Metodología}

Para el desarrollo del proyecto, se utilizó el método SCRUM de desarrollo de software. El mismo “es una metodología  de desarrollo muy simple, que requiere trabajo duro, porque la gestión no se basa en el seguimiento de un plan, sino en la adaptación continua a las circunstancias de la evolución del proyecto”. Entre sus características se encuentra que:

\begin{enumerate}

\item Es un método de desarrollo de carácter adaptable.

\item Es orientado a las personas, antes que a los procesos.

\item Emplea desarrollo ágil, interactivo e incremental.

\end{enumerate}

\section{Estructura del documento}

\begin{description}

\item Capítulo I. Introducción.

En esa sección se describe brevemente las características del problema abordado en el proyecto, analizando los antecedentes, delimitando los objetivos y estableciendo la metodología con que se procedió al estudió y resolución del mismo.

\item Capítulo II. Marco teórico.

En ese sección se exponen algunos conceptos relacionados con el problema planteado en el proyecto. Se da una breve introducción sobre los términos y herramientas utilizados para desarrollar el mismo.

\item Capitulo III. Desarrollo del Sistema WEB.

Contiene el diseño general del sistema de simulación, así como la arquitectura de la aplicación web, sus sub-sistemas, componentes relevantes y casos de uso.

\item Capitulo IV. Integración de GALATEA.

Explicar aquí.

\item Capítulo V. Pruebas.

Explicar aquí.

\item Capítulo VI. Conclusiones.

Explicar aquí.


\end{description}

\chapter{Marco teórico}

La simulación por computadora se ha convertido en una parte útil del modelado de muchos sistemas naturales en física, química y biología, y sistemas humanos como la economía y las ciencias sociales (sociología computacional), así como en dirigir para ganar la penetración (profundidad) su comportamiento cambiará cada simulación según el conjunto de parámetros iniciales supuestos por el entorno. En éste capítulo se explican en detalle las herramientas, tecnologías y conceptos usados para la consecución del proyecto que se propone. Definimos la simulación de eventos discretos DEVS (Discrete Event Simulation), así mismo nos introducimos en GALATEA, con el fin de proporcionar una base inicial para la codificación del nuevo sistema. Explicamos las ventajas de un servicio web y las herramientas empleadas para el desarrollo del mismo, como lo serian el Patrón de diseño Modelo Vista Controlador (MVC) y Django.

\section{Simulación Distribuida} 

Los sistemas de simulación distribuidos son herramientas muy útiles en las labores de investigación porque permiten reducir el tiempo necesario para ejecutar experimentos. Las simulaciones distribuidas pueden hacerse de forma que se acelere una simulación o que se acelere la ejecución de un conjunto de simulaciones. Los sistemas de simulación basados en agentes se pueden utilizar con éxito en ambos tipos de simulaciones distribuidas \citep{simulacionDistribuida}.

La Simulación Distribuida, es la que permite conducir modelos de simulación a través de múltiples hosts o computadoras separados por redes, se ocupa de cuestiones que surgen de la distribución de un programa de simulación de eventos discretos en varias computadoras \citep{discretSimulation}. La simulación paralela de eventos discretos se refiere a la ejecución en plataformas multi-procesador que contienen múltiples unidades de procesamiento  central que interaccionan entre sí con frecuencia, por ejemplo, miles de veces por segundo.

\section{Simulación de Eventos Discretos}

La simulación de eventos discretos es la "imitacion" de un proceso de operación o de un sistema del mundo real construido sobre la base del tiempo \citep{discretSimulation}. Esta codifica el comportamiento de sistemas complejos como una secuencia de eventos ordenados y bien definidos. En simulación de eventos discretos (DEVS por sus siglas en ingles),  el funcionamiento de un sistema se representa como una secuencia cronológica de los acontecimientos. Cada evento tiene lugar en un instante de tiempo y marca un cambio de estado en el sistema. Frente a su homóloga, la simulación de tiempo continuo, esta se caracteriza por un control en la variable del tiempo que permite avanzar a éste a intervalos variables, en función de la planificación de ocurrencia de tales eventos a un tiempo futuro. Estos sistemas se caracterizan por mantener un estado interno global del sistema, que puede no obstante estar física o lógicamente distribuido, y que cambia parcialmente debido a la ocurrencia de un evento. La ejecución de un evento puede desencadenar la generación de nuevos eventos futuros. Cada uno está marcado por su tiempo, por lo que el orden de generación puede no coincidir con el orden de ejecución.

\section{GALATEA}

Galatea es una plataforma para simulación de eventos discretos, DEVS, con una semántica basada a una red de nodos como metáfora del sistema a simular, la misma semántica matríz del sistema Glider, el proyecto paterno local, que fuera formalizada como parte del nuevo proyecto y luego generalizada para luego re-acomodar la simulación continua, la simulación de sistemas multi-agentes y la simulación distribuida, simulación con autómatas celulares y simulación con modelos explícitos de espacios urbanos o arquitectónicos \citep{Galatea}.

Podemos explicar de forma  breve y concisa en que consiste la misma, segun \citep{Galatea}:

\begin{quote}
	Galatea es una plataforma libre de código abierto para simulación de sistemas multi-agente que incorpora estrategias de simulación bien conocidas con la que cualquier modelista o simulista puede ensayar esas estrategias en problemas de simulación de sistemas complejos. La historia de Galatea comienza mucho antes que se planteara formalmente el proyecto con ese nombre. En 1993, nuestro muy joven Centro de Simulación y Modelos, CeSiMo, propone un proyecto para explorar la re-implementación de la plataforma de simulación Glider sobre una plataforma orientada a objetos dando origen a un prototipo experimental. El problema del cambio estructural, inspirado por investigaciones en economía, se había convertido entonces en uno de los objetivos de investigación fundamentales del CeSiMo y vendría a dictar también la pauta para Galatea. La noción de agente hizo su aparición en algunos reportes internos en los que se enfatizaba su importancia para modelar sistemas complejos como una economía nacional. En 1998 se planteó la posibilidad de integrar Glider con herramientas de inteligencia artificial para modelar agentes. En el 2000, un proyecto vendría a combinar aquel prototipo de 1993, con una teoría de agentes basada en lógica computacional que se planeaba integrar en una nueva teoría de simulación de sistemas multi-agentes. Allí nació Galatea. El logro fundamental para el proyecto, sin embargo, llegaría con las aplicaciones. En 2004, Galatea fue incorporada al banco de pruebas de un proyecto en biocomplejidad.
\end{quote}

\subsection{La arquitectura de la plataforma Galatea}

La arquitectura de GALATEA está basada en objetos. Tanto los agentes como el simulador principal están desarrollados de acuerdo a dicho diseño (orientado a objetos OOD), para apoyar la distribución, la modularidad, la escalabilidad y la interactividad como lo exige la especificación HLA (High Level Architecture). El lenguaje base usado para su desarrollo es el Java, bien especificado en \citep{Galatea}. Usando como lenguaje base Java, se especifico un nuevo lenguaje de simulación al que denominan lenguaje Galatea. La sintaxis del lenguaje Galatea es, de hecho una mezcla de la sintaxis Glider, las estructuras básicas de Java y las reglas de conductas de los agentes escritas en los lenguajes de programación lógica Actilog. La compleja semántica de Galatea establece que el código Java sea compilado y ejecutado por el motor de simulación de eventos discretos, mientras que las reglas de los agentes son interpretadas por un motor de inferencia implementado sobre una máquina Prolog  \citep{Galatea}. Es una plataforma mixta, que corre sobre máquinas virtuales Java y Prolog.

\section{Servicio Web}

Un servicio web (Web Service) es una tecnología que utiliza un conjunto de protocolos y estándares que sirven para intercambiar datos entre aplicaciones. Distintas aplicaciones de software desarrolladas en lenguajes de programación diferentes, y ejecutadas sobre cualquier plataforma, pueden utilizar los servicios web para intercambiar datos en redes de ordenadores como Internet. La World Wide Web Consortium lo define como “...un sistema de software diseñado para soportar interacción interoperable máquina a máquina sobre una red. Este tiene una interface descrita en un formato procesable por una máquina (específicamente WSDL). Otros sistemas interactúan con el servicios web en una manera prescrita por su descripción usando mensajes SOAP, típicamente enviados usando HTTP con una serialización XML en relación con otros estándares relacionados con la web” \citep{servicioWeb}. Se puede definir de manera más sencilla como un conjunto de tecnologías estándares de software para el intercambio de datos entre aplicaciones tales como SOAP, WDSL y UDDI. Estos pueden ser desarrollados en una gran variedad de lenguajes para ser implementados sobre muchos tipos de redes de computadores. El éxito de la interoperabilidad se consigue gracias es la adopción de protocolos y estándares abiertos.

\section{Arquitectura Orientada a Servicios}

Una arquitectura orientada a servicios (SOA, Service Oriented Architecture), es una arquitectura de estilo técnico que proporciona los medios para integrar sistemas dispares y descubrir las funciones de negocio reutilizables. Es un paradigma de arquitectura para diseñar y desarrollar sistemas distribuidos. Las soluciones  SOA  han sido creadas para satisfacer los objetivos de negocio las cuales incluyen facilidad y flexibilidad de integración con sistemas legados, alineación directa a los procesos de negocio reduciendo costos de implementación, innovación de servicios a clientes y una adaptación ágil ante cambios incluyendo reacción temprana ante la competitividad \citep{orientadaServicios}.

La definición de SOA por el W3C es: “Conjunto de componentes, los cuales pueden ser invocados y cuyas descripciones de interfaces pueden ser invocadas y descubiertas”. 

Gartner: “SOA es una arquitectura de software que comienza con una definición de interfaz y construye toda la topología de la aplicación como una topología de interfaces, implementaciones y llamadas a interfaces. Sería más adecuado llamarla “arquitectura orientada a interfaces”. SOA es una relación de servicios y consumidores de servicios, ambos suficientemente amplios para representar una función de negocios completa”.

SOA no es sólo una arquitectura de servicios visto desde una perspectiva de la tecnología, si no las políticas, prácticas y frameworks con los que se garantiza la forma correcta de que los servicios sean provistos y consumidos. Es importante que si un servicio no va a ser usado por múltiples consumidores, la especificación sea generalizada; los servicios necesitan ser extraídos de la implementación y los desarrolladores de las aplicaciones del consumidor no deberían necesitar saber nada sobre los modelos de bajo nivel y sus reglas \citep{orientadaServicios}.

\section{Herramientas usadas para el desarrollo del sistema}

A continuación se describen las herramientas usadas para el desarrollo del sistema web de simulación de eventos discretos GALATEA:

\subsection{Modelo Vista Controlador (MVC)}

El modelo vista controlador (MVC) es un patrón de diseño de software, que separa los datos y la lógica de una aplicación de la interfaz de usuario y el módulo encargado de gestionar los eventos y las comunicaciones. Para ello MVC propone la construcción de tres componentes distintos que son el modelo, la vista y el controlador, es decir, por un lado define componentes para la representación de la información, y por otro lado para la interacción del usuario. Este patrón de arquitectura de software se basa en las ideas de reutilización de código y la separación de conceptos, características que buscan facilitar la tarea de desarrollo de aplicaciones y su posterior mantenimiento. Este patrón de diseño es muy popular en el marco de aplicaciones web ya que su abstracción permite escribir software altamente desacoplado y fácil de mantener y escalar. La figura \ref{mvc} muestra la relación entre los módulos de MVC.


Los modelos son los componentes de la aplicación del sistema que realmente hacen el trabajo. Se mantienen muy distintos de las vistas, que muestran aspectos de los modelos. Los controladores se utilizan para enviar mensajes a los modelos, y proporcionar la interfaz entre el modelo con sus vistas asociadas y los dispositivos de interfaz de usuario interactivas (por ejemplo, teclado, ratón). Cada vista se puede pensar que está estrechamente vinculada con un controlador, que tienen cada uno exactamente un modelo, sino un modelo puede tener muchos pares vista / controlador \citep{modeloVistaControlador}.

\subsubsection{Modelo}

El modelo es un conjunto de clases que representan la información del mundo real que el sistema debe procesar, así por ejemplo un sistema de administración de datos climatológicos tendrá un modelo que representará la temperatura, la humedad ambiental, el estado del tiempo esperado, etc. sin tomar en cuenta ni la forma en la que esa información va a ser mostrada ni los mecanismos que hacen que esos datos estén dentro del modelo, es decir, sin tener relación con ninguna otra entidad dentro de la aplicación \citep{modeloVistaControladorBascon}.

\subsubsection{Vista}

Las vistas son el conjunto de clases que se encargan de mostrar al usuario la información contenida en el modelo. Una vista está asociada a un modelo, pudiendo existir varias vistas asociadas al mismo modelo; así por ejemplo, se puede tener una vista mostrando la hora del sistema como un reloj analógico y otra vista mostrando la misma información como un reloj digital \citep{modeloVistaControladorBascon}.

\subsubsection{Controlador}

El controlador es un objeto que se encarga de dirigir el flujo del control de la aplicación debido a mensajes externos, como datos introducidos por el usuario u opciones del menú seleccionadas por él. A partir de estos mensajes, el controlador se encarga de modificar el modelo o de abrir y cerrar vistas. El controlador tiene acceso al modelo y a las vistas, pero las vistas y el modelo no conocen de la existencia del controlador \citep{modeloVistaControladorBascon}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/RelacionesMVC.png}
	\caption{Relaciones entre los módulos del patrón MVC.}
	\label{mvc}
\end{figure}


\subsection{Django}

Django es un framework de desarrollo web de código abierto, escrito en Python, que respeta el patrón de diseño conocido como Modelo–vista–controlador. La meta fundamental de Django es facilitar la creación de sitios web complejos. Django pone énfasis en el re-uso, la conectividad y extensibilidad de componentes, el desarrollo rápido y el principio No te repitas (DRY, Don't Repeat Yourself). Python es usado en todas las partes del framework, incluso en configuraciones, archivos, y en los modelos de datos. Django permite construir aplicaciones web rápidamente, gracias a su filosofía de baterías incluidas, es decir, que incluye una inmensa gama de características comunes a la mayoría de las aplicaciones web como las validaciones , autentificación de usuarios, manejo de sesiones entre muchos otros \citep{django}.

Cuando Django recibe una petición ésta pasa por un despachador de URLs (URL Dispatcher), cuya tarea es emparejar el URL con una vista y delegar a la vista el manejo de la petición. La vista contiene la lógica necesaria pa atender la petición entrante. Generalmente esto consiste en retirar o actualizar algunos datos del modelo, que a su vez se comunica con el manejador de base de datos, finalmente la vista combina los datos retirados de la base de datos, la petición y la sesión activa con una plantilla (template) para generar la respuesta de será devuelta.

Django ha demostrado ser escalable y flexible, se sabe de instancias de Django atendiendo ráfagas de cincuenta mil peticiones por segundo, además es de código abierto, gratuito y cuenta con una extensa comunidad de colaboradores y amplia documentación.

\subsection{Bases de Datos}

Una base de datos o banco de datos es un conjunto de datos pertenecientes a un mismo contexto y almacenados sistemáticamente para su posterior uso. En este sentido; una biblioteca puede considerarse una base de datos compuesta en su mayoría por documentos y textos impresos en papel e indexados para su consulta. Actualmente, y debido al desarrollo tecnológico de campos como la informática y la electrónica, la mayoría de las bases de datos están en formato digital, siendo este un componente electrónico, por tanto se ha desarrollado y se ofrece un amplio rango de soluciones al problema del almacenamiento de datos. 

Según \citep{baseDato}, una base de datos es una colección de datos estructurados. Puede ser cualquier cosa desde una simple lista de compras. una galería de fotos o las bastas cantidades de información en una red corporativa. Para agregar, acceder y procesar los datos almacenados en una base de datos, se necesita un sistema manejador de base de datos. Ya que los computadores hacen un muy buen trabajo manejando grandes cantidades de datos, los sistemas manejadores de bases datos juegan un papel central en la computación como utilidades independientes o partes de otras aplicaciones.

\subsubsection{MySQL}

Mysql es un sistema manejador de bases de datos relacionales (RDBMS por sus siglas en ingles) de código abierto bajo la licencia GPL (GNU General Public License). Mysql se caracteriza por ser rápido, confiable escalable y fácil de usar, es posible instalar Mysql tanto en una maquina junto a otras aplicaciones como servidores web o también instalarlo en máquinas dedicadas para que use todo el poder de cómputo disponible. Mysql posee características para ejecutarse en clusters de máquinas junto con un motor de replicación para obtener una alta escalabilidad \citep{baseDato}. 

\subsubsection{PostgreSQL}

PostgreSQL es un sistema de base de datos de gran alcance, de código abierto objeto-relacional. Cuenta con más de 15 años de desarrollo activo y una arquitectura probada que se ha ganado una sólida reputación de fiabilidad, integridad de datos y correctitud. Se ejecuta en todos los principales sistemas operativos, incluyendo Linux, UNIX, y Windows. Es totalmente compatible con ACID, tiene soporte completo para claves foráneas, combinaciones, vistas, triggers y procedimientos almacenados (en varios idiomas). Incluye más SQL: 2008 tipos de datos, incluyendo entero, numérico, Boolean, CHAR, VARCHAR, DATE, INTERVALO y TIMESTAMP. También es compatible con el almacenamiento de objetos binarios grandes, como imágenes, sonidos, o de vídeo. Tiene interfaces de programación nativo de C / C ++, Java, .Net, Perl, Python, Ruby, Tcl, ODBC, entre otros, y la documentación excepcional \citep{baseDatoPostgresql}.

\subsubsection{Mapeo Objeto-Relacional}

El Mapeo Objeto-Relacional (ORM por sus siglas en ingles) es un método para interacturar con bases de datos relacionales desde el paradigma de la programación orientada a objetos, de esta manera es posible aprovechar conceptos como herencia y polimorfismo. Es una técnica de programación para convertir datos entre el sistema de tipos utilizado en un lenguaje de programación orientado a objetos y la utilización de una base de datos relacional como motor de persistencia. En la práctica esto crea una base de datos orientada a objetos virtual, sobre la base de datos relacional. Esto posibilita el uso de las características propias de la orientación a objetos (básicamente herencia y polimorfismo).

El uso de un ORM simplifica enormemente el manejo de la estructura de datos subyacente ya que permite al programador manejar los datos a un mayor nivel de abstracción como si fueran objetos, sin necesidad de general manualmente las consultas SQL, además ésta capa de abstracción permite desacoplar el código de la aplicación de los detalles específicos de cada RDBMS \citep{tesisJesus}.

\subsection{JSON}

JSON (JavaScript Object Notation) es un formato textual de intercambio y almacenamiento de datos no estructurados, JSON posee un formato que es fácil de leer para humanos y fácil de interpretar para máquinas y más ligero que XML por lo que se ha popularizado para el desarrollo de APIs. JSON es un formato de texto que es completamente independiente del lenguaje, pero utiliza las convenciones que son familiares para los programadores de la familia de lenguajes C, incluyendo C, C++, C\#, Java, JavaScript, Perl, Python, y muchos otros. Estas propiedades hacen JSON un lenguaje ideal de intercambio de datos.

\subsection{AJAX}

AJAX (Asynchronous JavaScript And XML), es una técnica de desarrollo web para crear aplicaciones interactivas o RIA (Rich Internet Applications). Estas aplicaciones se ejecutan en el cliente, es decir, en el navegador de los usuarios mientras se mantiene la comunicación asíncrona con el servidor en segundo plano. De esta forma es posible realizar cambios sobre las páginas sin necesidad de recargarlas, mejorando la interactividad, velocidad y usabilidad en las aplicaciones. Ajax es una tecnología asíncrona, en el sentido de que los datos adicionales se solicitan al servidor y se cargan en segundo plano sin interferir con la visualización ni el comportamiento de la página, aunque existe la posibilidad de configurar las peticiones como síncronas de tal forma que la interactividad de la página se detiene hasta la espera de la respuesta por parte del servidor \citep{ajaxManual}.


\chapter{Desarrollo del Sistema WEB}

El sistema de simulación de eventos discretos mediante la web consiste de tres elementos principales: (1) La aplicación Web que funciona como coordinador del sistema, control de usuarios y roles; (2) Administración de archivos que permite llevar el control de acceso, creación y modificación de los archivos dentro del sistema, y (3) El Sistema Integración con GALATEA, que ofrece las funcionalidades de simulación, conexión y control con el motor de simulación.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/RelacionesMVC.png}
	\caption{Sistema de Simulación Web GALATEA.}
	\label{estructuraSistema}
\end{figure}

En la figura \ref{estructuraSistema} se observa la relación que existe entre los componentes principales que conforman el sistema. El punto de entrada principal del sistema es la aplicación Web, que es la encargada de manejar el acceso de los usuarios a las distintas funcionalidades del sistema, esto lo realiza mediante la implementación de roles de usuarios y manejo de permisologías. La aplicación web controla la visualización, acceso y modificación de los distintos archivos y carpetas, mediante peticiones a el módulo de administración de archivos. Otro aspecto fundamental de la aplicación Web es el control y visualización de las simulación, mediante el acceso al sistema de Integración con GALATEA.

El módulo de Administración de Archivos es una pequeña API que se desarrollo, la cual permite llevar el control de creación, modificación y eliminación de archivos dentro del sistema. Esta API está escrita en python y maneja el control de excepciones u errores que pueden aparecer mediante se realiza ese control, al igual permite verificar el espacio en disco usado por cada usuario. En secciones posteriores se especificara con mas detalles la funcionalidad de este módulo.

El sistema de Integración con GALATEA es una API de interconexión entre nuestra aplicación Web y el simulador GALATEA. Como ambos sistemas están desarrollados en ambientes distintos, con códigos distintos, se busco desarrollar un mecanismo de comunicación. La API Permite crear una instancia del Simulador GALATEA y ejecutarlo, controlar la compilación y los parámetros de ejecución de la simulación. Esto lo desarrollamos en python mediante la implementación de control de procesos y socket. En el capítulo siguiente especificaremos a detalle en funcionamiento de este sistema de integración.

\section{Diseño de la aplicación WEB}

Para el desarrollo de esta aplicación se usó el framework de desarrollo web Django que implementa un patrón de diseño MVC.

\subsection{Arquitectura}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/RelacionesMVC.png}
	\caption{Arquitectura de la aplicación web.}
	\label{arquitecturaAplicacion}
\end{figure}

La arquitectura del sistema web de simulación GALATEA consiste en cuatro capas, la capa superior o capa de presentación se ejecuta en el navegador del cliente, para ver los resultados obtenidos de la simulación, visualización de archivos, entre otras acciones que pude realizar el usuario; esta capa se comunica con la capa dos o capa de servicio, que es ejecutada por el servidor web y es la responsable de atender las peticiones de los usuarios del sistema; la capa tres es la encargada de las peticiones a los otros módulos que conforman el sistema, comunicación con el módulo de manejo de archivos e integración con el simulador GALATEA; la capa cuatro o capa de datos aloja los datos de la aplicación como usuarios, archivos, carpetas, simulaciones entre otros.

\subsection{Capa 1: Presentación}

La capa de presentación es la interfaz gráfica que permite la interacción del usuario con el sistema de simulación Web. Esta capa consiste en los despliegues de navegadores en cualquier dispositivo conectado a Internet y su propósito es ofrecer la usuario una interfaz gráfica para ingresar el sistema, configurar y manejar simulaciones, observar resultados, entre otros.

La capa de presentación puede ser extendida para la implementación de distintos front-ends como aplicaciones nativas para sistemas operativos móviles o de escritorio a través de APIs programáticas.

\subsection{Capa 2: Servidor Web}

El servidor web es el punto de entrada a la aplicación, éste responde a las peticiones realizadas desde el front-end a través del protocolo HTTP, el enfoque del servidor web es manejar tareas ligeras de la forma mas rápida posible y retornar respuestas para ofrecer al usuario baja latencia en su interacción con el sistema.

\begin{table}[H]
	\centering

		{\fontsize{10pt}{\baselineskip}\selectfont
			\begin{tabular}[t]{|l|c|}
				\hline
				Ruta & Acción \\\hline
				/static/ & Servicio de archivo estático  \\\hline
				/media/ & Servicio de archivo estático \\\hline
				/ &	re-dirección a la aplicación  \\\hline
			\end{tabular}
		}
		
		\caption {Tabla de enrutamiento del servidor web.} \label{tabla-enrutamineto}
\end{table}

El servidor web debe manejar dos tipos de peticiones: aquellas que requieren respuestas dinámicas ajustadas a los datos específicos que pertenecen a cada usuario en particular y peticiones de archivos estáticos como CSS, JavaScript, imágenes o archivos HTML pre-definidos que cambien poco o rara vez. A pesar de que la aplicación web es capaz de manejar ambos tipos de peticiones, cada una de ellas tendrá que pasar por todo el pipeline de Django (middlewares, resolución de URLs, procesamiento de la vista, etc), esta complejidad es innecesaria cuando se trata de archivos estáticos y va a sobrecargar el servidor web en entornos de producción.

Para manejar eficientemente todo tipo de peticiones, debemos implementar un mecanismo que sea capaz de servir los archivos estáticos rápidamente y que sirva como proxy entre el front-end y la aplicación web, hay una gran variedad de servidores como Apache\footnote{Apache https://www.apache.org/}, Nginx\footnote{Nginx https://nginx.org/} o Lighttpd\footnote{Lighttpd https://www.lighttpd.net/} diseñados especialmente con este propósito, éstos tendrán una sencilla tabla de enrutamiento que decidirá cómo manejar las peticiones. La aplicación web podrá correr entonces en un proceso separado y sólo atenderá peticiones dinámicas, así se asegurará la eficiencia en el uso de los recursos computacionales disponibles.

\subsection{Capa 3: Integración de Procesos}

Definir

\subsection{Capa 4: Datos}

Incluye todos los sistemas encargados de almacenar o alojar los datos en forma persistente ya sea a través de de bases de datos o disco duro.

\subsubsection{Bases de datos}

La base de datos es el almacén principal de los datos estructurados de la aplicación web, almacena todos tipo de datos de información como datos del usuario, referencias de los archivos, logs de información, entre otras cosas.

El diseño de la base de datos es una de los pilares fundamentales del diseño del sistema, el correcto diseño de las tablas de la base de datos tiene repercusiones importantes en la escalabilidad y tiempo de respuesta del sistema.

\subsubsection{Archivos de usuario}

Los archivos de usuario son de gran importancia a ser manejados en el sistema, estos pueden ser de configuración de perfiles como imágenes, y los de simulaciones que varían desde archivos Java, archivos GALATEA y archivos de texto con información de simulaciones, entre otros.

Todos estos archivos son almacenamos en un sistema de almacenamiento secundario, el cual es configurado dentro de la aplicación y controlado para su correcto funcionamiento y acceso. Cada usuario cuenta dentro del sistema con una porción de almacenamiento para su uso.

\subsection{Diseño de la Base de Datos}\label{BaseDatos}

Puesto que Django hace uso de un ORM para manejar la base de datos, desde le punto de vista de la aplicación web, cada tabla de la base de datos es una clase, por lo que es posible aprovechar todas las características de la programación orientada a objetos como: herencia de clases, clases abstractas, implementación de métodos específicos a un modelo y sobre carga de métodos.

A continuación se describen los modelos que forman parte  de la base de datos:

Cada usuario registrado esta representado por el modelo \textit{user}, el cual contiene la información básica del usuario y su información de ingreso al sistema. Para información de perfil e imagen se maneja el modelo \textit{UserImage}.

El manejo de roles se define en el modelo \textit{group}, en el cual manejamos dos roles principales: el de \textit{administrador} y el de \textit{usuario}.

Las relaciones de usuarios se maneja mediante \textit{Relationship}, lo cual nos permite definir la relación de \textit{amistad} entre dos usuarios. Esto nos permitirá compartir archivos entre usuarios.

Los archivos son manejados por \textit{File}, que permite definir la información básica y permisología de acceso a los mismos.

Las carpetas están definidas mediante  \textit{Folder}, que contiene la información básica y jerárquica de carpetas. Otro modelo muy relacionado es \textit{DiskSpace}, que nos permite llevar el control de espacio en disco usado por el usuario.

Para compartir un archivo usamos el modelo \textit{ShareFile}, que contiene la información del archivo y sus permisos compartidos.

Las carpetas compartidas en \textit{ShareFolder}, que contienen la información de la carpeta compartida y sus permisos de acceso.

Hay una gran variedad de logs que se manejan los cuales se encuentran en distintas tablas como: \textit{logsfile} para logs de archivos, \textit{logsfolder} para las modificaciones de carpetas, entre otros.

\subsubsection{Diagrama de entidad-relación}

La figura \ref{entidadRelacionPrincipal} muestra las entidades principales y sus relaciones dentro de la base de datos.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/RelacionesMVC.png}
	\caption{Entidades principales de la base de datos.}
	\label{entidadRelacionPrincipal}
\end{figure}

La figura \ref{entidadRelacionUsuarios} muestra las entidades  relacionadas al control y manejo de usuarios, sus roles y perfiles .

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/RelacionesMVC.png}
	\caption{Entidades manejo de usuarios.}
	\label{entidadRelacionUsuarios}
\end{figure}


La figura \ref{entidadRelacionArchivosCarpetas} muestra la relación para el control de archivos y carpetas que puede manejar el usuario.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/RelacionesMVC.png}
	\caption{Entidades manejo archivos y carpetas.}
	\label{entidadRelacionArchivosCarpetas}
\end{figure}

La figura \ref{entidadRelacionArchivosCarpetasCompartidos} muestra la relación para el control de archivos y carpetas compartidas entre otros usuarios.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/RelacionesMVC.png}
	\caption{Entidades manejo archivos y carpetas compartidos.}
	\label{entidadRelacionArchivosCarpetasCompartidos}
\end{figure}

\subsubsection{Entidades}

Las siguientes tablas resumen las entidades y la función de las mismas dentro del sistema web:

\begin{table}[H]
	\centering
	
	{\fontsize{10pt}{\baselineskip}\selectfont
		\begin{tabular}[t]{|r|l|}
			\hline
			Nombre de la entidad & Función \\\hline
			\textit{User} & Almacena la información básica de usuario y de acceso al sistema  \\\hline
			\textit{UserImage} & Guarda la imagen del perfil de cada usuario \\\hline
			\textit{Group} &	Define los roles a ser usados dentro del sistema (Administrador y Usuario)  \\\hline
			\textit{Relationship} &	Define las relaciones entre usuarios  \\\hline
		\end{tabular}
	}
	
	\caption {Entidades relacionadas al manejo de usuarios.} \label{tabla-manejo-usuarios}
\end{table}

\begin{table}[H]
	\centering
	
	{\fontsize{10pt}{\baselineskip}\selectfont
		\begin{tabular}[t]{|r|l|}
			\hline
			Nombre de la entidad & Función \\\hline
			\textit{File} & Almacena la información básica de archivo y su permisología de acceso  \\\hline
			\textit{Folder} & Información básica de una carpeta junto a su permisología de acceso \\\hline
			\textit{DiskSpace} & Controla el espacio usado en disco por cada usuario \\\hline
		\end{tabular}
	}
	
	\caption {Entidades relacionadas al manejo de archivos y carpetas.} \label{tabla-manejo-archivos-carpetas}
\end{table}

\begin{table}[H]
	\centering
	
	{\fontsize{10pt}{\baselineskip}\selectfont
		\begin{tabular}[t]{|l|c|}
			\hline
			Nombre de la entidad & Función \\\hline
			\textit{ShareFolder} & Llevar control de la carpeta compartida  \\\hline
			\textit{ShareFile} & Almacenar la información del archivo compartido \\\hline
		\end{tabular}
	}
	
	\caption {Entidades relacionadas al manejo de archivos y carpetas compartidos.} \label{tabla-manejo-archivos-carpetas-compartidos}
\end{table}


\subsubsection{Relaciones}

\begin{itemize}
	\item \textbf{modelo1 - modelo2 (1-1)}: Explicación.
	\item \textbf{modelo1 - modelo2 (1-1)}: Explicación.
	\item \textbf{modelo1 - modelo2 (1-1)}: Explicación.
	\item \textbf{modelo1 - modelo2 (1-1)}: Explicación.
	\item \textbf{modelo1 - modelo2 (1-1)}: Explicación.
\end{itemize}

\subsection{Diseño de Pantallas}

Todas las pantallas del sistema fueron creadas bajo el paradigma del diseño web adaptable, es decir, que pueden ajustarse a cualquier resolución de pantalla sin reducir la usabilidad o sacrificar la experiencia del usuario, el servidor no tiene que decidir entre un conjunto de plantillas para distintas resoluciones, sino que envía al cliente sólo documento HTML y este combina las reglas de presentación de archivos CSS y la lógica de archivos JavaScript para desplegar una página web adaptada al dispositivo del usuario.

Ya que una aplicación web está compuesta por decenas de vistas que comparten componentes como: barras de navegación, cabeceras y pie de páginas, Django incluye un micro-lenguaje de plantillas con funcionalidades de herencia e inclusión, estructuras de repetición y decisión, esto hace que sea posible tener una taxonomía de plantillas, de manera que sólo es necesario escribir los elementos comunes a un conjunto de plantillas una vez y crear nuevas pantallas en el tope de otras. Se le llama rendering al proceso de combinar los datos de la base de datos y la petición del usuario, junto con una plantilla predefinida en la aplicación para generar páginas web personalizadas.

Todas las plantillas heredan de una plantilla base, ésta incluye la declaración del archivo HTML, la cabecera y define bloques que pueden ser sobrescritos por las plantillas "hijas". Los bloques principales definidos en nuestro diseño son: \textbf{(1) Bloque de título} permite definir el título de la pagina, \textbf{(2) Otro bloque} permite explicación, \textbf{(2) Otro bloque} permite explicación.

A continuación se muestran las principales pantallas de la interfaz de usuario del servicio web:

\begin{itemize}
	\item \textbf{Pantalla 1}: Explicación.
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.4]{img/RelacionesMVC.png}
		\caption{Pantalla1.}
		\label{pantalla1}
	\end{figure}
	
	\item \textbf{Pantalla 2}: Explicación.
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.4]{img/RelacionesMVC.png}
		\caption{Pantalla2.}
		\label{pantalla2}
	\end{figure}
	
	\item \textbf{Pantalla 3}: Explicación.
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.4]{img/RelacionesMVC.png}
		\caption{Pantalla3.}
		\label{pantalla3}
	\end{figure}
\end{itemize}


\subsection{Diseño de URLs}

Ya que la aplicación web consiste en un largo conjunto de vistas, debemos diseñar URLs que apunten a cada una de ellas de forma ordenada y lógica. Para esto, se ha usado una convención en la que la unidad principal de operación como archivos, carpetas, usuarios, a continuación se muestran ejemplos de las reglas usadas para diseñar las URLs:

\begin{itemize}
	\item Operaciones sobre algo:
	\begin{itemize}
		\item \textbf{GET /admin/algo/} explicación.
		\item \textbf{POST /admin/algo/} explicación.
		\item \textbf{GET /user/algo/} explicación.
		\item \textbf{POST /user/algo/} explicación.
	\end{itemize}
	\item Operaciones sobre algo:
	\begin{itemize}
		\item \textbf{GET /admin/algo/} explicación.
		\item \textbf{POST /admin/algo/} explicación.
		\item \textbf{GET /user/algo/} explicación.
		\item \textbf{POST /user/algo/} explicación.
	\end{itemize}
	\item Operaciones sobre algo:
	\begin{itemize}
		\item \textbf{GET /admin/algo/} explicación.
		\item \textbf{POST /admin/algo/} explicación.
		\item \textbf{GET /user/algo/} explicación.
		\item \textbf{POST /user/algo/} explicación.
	\end{itemize}
\end{itemize}

\section{Administrador de Archivos}

Un administrador de archivos, gestor de archivos o explorador de archivos es un programa que otorga al usuario la capacidad de trabajar, gestionar o administrar archivos y carpetas. Esto lo realizan mediante una interfaz de usuario que entre muchas operaciones permiten al usuario abrir, crear, editar, reproducir, ya sean archivos o carpetas. En el sistema de simulación web GALATEA se desarrolló un administrador de archivos web que permite al simulista crear, editar, visualizar proyectos de simulación entre algunas otras opciones. Los administradores de archivos basados en la web son típicamente scripts escritos en cualquiera de los lenguajes para desarrollo web coomo PHP, Ajax, Perl, ASP u otro lenguaje de servidor. 

Como todo administrador de archivos existente, éste debe trabajar bajo un sistema de archivos el cual dependerá del sistema operativo en el que se encuentre instalado. Sus principales funciones son la asignación de espacio a los archivos, la administración del espacio libre y del acceso a los datos resguardados. Estructuran la información guardada en un dispositivo de almacenamiento de datos o unidad de almacenamiento (normalmente un disco duro de una computadora), que luego será representada ya sea textual o gráficamente utilizando un gestor de archivos.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/RelacionesMVC.png}
	\caption{Estructura del Administrador de Archivos y Carpetas.}
	\label{estructuraAdministradorArchivosCarpetas}
\end{figure}

El framework de desarrollo web Django usado para desarrollar este proyecto nos permite tener una interacción directa con los archivos y carpetas, esto debido a el lenguaje principal es que se encuentra escrito (Python), el cual es un lenguaje de programación potente y versátil para desarrollar cualquier tipo de tareas. Por ende nuestro administrador de archivos y carpetas esta escrito en python, haciendo uso de las librerías de control archivos y carpetas que el lenguaje nos proporciona.

En la figura \ref{estructuraAdministradorArchivosCarpetas} podemos observar la estructura y diseño de nuestro administrador de archivos, como capa base tenemos a python y sus librerías de manejo de archivos, el cual interactua con el sistema de archivos de nuestro sistema operativo y ejecuta las operaciones a nivel físico en nuestra maquina o servidor. Como interfaz de usuario tenemos a Django, al ser un framework web nos permite una interacción simple y elegante con el usuario para controlar nuestros archivos y carpetas. En el punto central se encuentra nuestro código en python que sirve como una APIs de interconexión entre nuestra interfaz de usuario y el sistema manejador de archivo.

Una configuración de nuestro sistema es la integración de permisologías a los archivos y carpetas, lo cual nos permite compartirlos entre los distintos usuarios del sistema. Esto lo logramos mediante la definición de un conjunto de permisologías como lo observamos en la tabla \ref{permisoArchivosCarpetas}. Estas configuraciones de permisos están agregados a los modelos en la base de datos, controlados y configurados por el usuario mediante la interfaz de usuario del sistema.

\begin{table}[H]
	\centering
	
	{\fontsize{10pt}{\baselineskip}\selectfont
		\begin{tabular}[t]{|l|c|}
			\hline
			Permiso & Definición \\\hline
			\textit{Private (0) } & Solo el dueño puede acceder a él \\\hline
			\textit{Show (1) } & Otros usuarios pueden acceder al él solo para lectura \\\hline
			\textit{Edit (2) } & Otros usuarios pueden acceder al él para lectura y escritura  \\\hline
			\textit{Delete (3) } & Otros usuarios pueden acceder al él y tienen control total  \\\hline
		\end{tabular}
	}
	
	\caption {Permisología de Archivos y Carpetas.} \label{permisoArchivosCarpetas}
\end{table}

\subsection{Control de Archivos}

El administrador de archivos tiene como modelos de datos principales para el manejo de archivos a File, LogsFile y DiskSpace, los cuales fueron explicados en la sección \ref{BaseDatos}. Para el manejo de archivos hacemos creamos cinco métodos principales los cuales son: 

\begin{itemize}
	\item Create File: el cual nos permite crear un archivo en una carpeta determinada.
	\item Show File: nos permite acceder a los datos dentro del archivo para ser visualizados por el usuario.
	\item Edit File: edita la información que se encuentra en el archivo.
	\item Move File: permite mover el archivo desde su carpeta origen a una nueva carpeta destino.
	\item Delete File: elimina el archivo de nuestro sistema.
\end{itemize}

Todos los archivos desde su creación tienen su dueño y permisología asociada. El manejo de archivos dentro del sistema tiene las funcionalidades necesarias para su correcto funcionamiento, permitiendo una gran variedad de acciones a realizar.

\subsection{Control de Carpetas}

El control de carpetas es una de puntos mas importantes dentro de nuestro administrador de archivos, debido a que todos los archivos están relacionados con una carpeta y las carpetas en si tienen una relación jerárquica entre ellas. En la figura \ref{jerarquiaCarpetas} observamos esa relación jerárquica en nuestro manejo de carpetas. 

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.4]{img/RelacionesMVC.png}
	\caption{Jerarquía de Carpetas.}
	\label{jerarquiaCarpetas}
\end{figure}

Cómo raíz de nuestro sistema de carpetas tenemos a la carpeta \textit{media}, la cual es el punto de partida para todo nuestro manejo de archivos y carpetas. En el segundo nivel de jerarquía tenemos las carpetas de \textit{usuarios}, las cuales funcionan como punto de raíz para su sistema interno de archivos y carpetas.

Para el correcto manejo de carpetas se definieron una serie de métodos:

\begin{itemize}
	\item Create Folder: el cual nos permite crear una carpeta bajo cierta jerarquía.
	\item Show Folder: nos permite acceder a los archivos y carpetas internos.
	\item Edit Folder: editar la información básica de la carpeta.
	\item Move Folder: esta es una función delicada, debido a los archivos y carpetas internos, para ello se definió el método de manera recursiva y así modificar todo sin problemas.
	\item Delete Folder: elimina toda la información de la carpeta junto con sus archivos y carpetas internos.
\end{itemize}

Debido a que el espacio en disco físico no es ilimitado, cada usuario tiene una porción de espacio asociado para su manejo de archivos y carpetas. Este espacio es constantemente monitoreado por el administrador de archivos y es una de las restricciones principales para su correcto funcionamiento. Esta porción de espacio en disco es fácilmente administrable por el administrador de nuestro sistema web.

\subsection{Control de Permisos}

Mediante el sistema web de simulación GALATEA se busca que los usuarios y usuarias tengan interacción entre ellos y puedan trabajar en conjunto, para así fortalecer y mejorar sus proyectos de simulación. Para ellos se implementó un sistema de permisos de acceso y modificación tanto para los archivos como carpetas dentro del sistema.

Cómo lo muestra la tabla \ref{permisoArchivosCarpetas} existen cuatro permisos bien definidos, pero debemos recalcar que estos permisos se enfocan en dos tipos de usuarios propiamente dichos:

\begin{itemize}
	\item Usuarios Amigos: estos son como su nombre lo indica \textit{amigos} en el sistema, conocidos. El privilegio principal de tener el \textit{status amigo}, es que permite compartir archivos y carpetas entre ellos.
	\item Usuarios NO Amigos: son usuarios que no poseen relación en el sistema.
\end{itemize}

Esto nos permite definir ambas permisologías para cada tipo de usuario. Para los usuarios \textit{NO Amigos}, mantenemos el mismo tipo de permisos y depende del usuario dueño cambiar o no los permisos de sus archivos para darle acceso a este tipo de usuarios. Un \textit{usuario amigo} tiene una relación directa con el usuario dueño, lo cual nos permite compartir nuestros archivos con ellos; este compartir se define en el modelo de datos \textit{ShareFile}, el cual contiene la permisología con la que definimos el acceso que el \textit{usuario amigo} puede tener sobre el archivo. El sistema permite que el usuario dueño en cualquier momento pueda cambiar la permisología que poseen cada uno de sus archivos y carpetas tanto para los \textit{usuarios amigos}, como los \textit{usuarios no amigos}.

\chapter{Integración de GALATEA}

Integración de GALATEA aquí.

\section{Configuración}

Definir

\section{Estructura GALATEA}

Definir

\section{Control de Simulación}

Definir

\chapter{Pruebas}

Definir

\chapter{Conclusiones}

Definir

\section{Recomendaciones}

Definir

% Estilo de la bibliografía
\bibliographystyle{apa}

% ***************************************************************** %
% Para agregar toda la bibliografia del archivo .bib
% solo descomente el siguiente comando
% ***************************************************************** %
%\nocite{*}
% ***************************************************************** %

% Nombre del archivo con extensión .bib en donde se almacena la bibliografía
\bibliography{bibliografia}

\appendix

% ***************************************************************** %
% FIN DE
% Cuerpo
% ***************************************************************** %

\end{document}
